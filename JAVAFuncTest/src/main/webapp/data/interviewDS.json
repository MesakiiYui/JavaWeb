[{
  "category": "dataStruct",
  "qes": "Java中的Queue 队列",
  "ans": "<div id=\"content_views\" class=\"markdown_views prism-atom-one-light\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n                        <path stroke-linecap=\"round\" d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n                    </svg>\n                    <h3 id=\"点击查看-java-集合框架深入理解-系列-つロ-乾杯\"><a name=\"t0\"></a><a name=\"t0\"></a><a href=\"http://blog.csdn.net/u011240877/article/category/6447444\">点击查看 Java 集合框架深入理解 系列</a>， - ( ゜- ゜)つロ 乾杯~</h3> \n<hr> \n<blockquote> \n <p>今天心情不太好，来学一下 List 吧！</p> \n</blockquote> \n<h2 id=\"什么是队列\"><a name=\"t1\"></a><a name=\"t1\"></a>什么是队列</h2> \n<h4 id=\"队列是数据结构中比较重要的一种类型它支持-fifo尾部添加头部删除先进队列的元素先出队列跟我们生活中的排队类似\">队列是数据结构中比较重要的一种类型，它支持 FIFO，尾部添加、头部删除（先进队列的元素先出队列），跟我们生活中的排队类似。</h4> \n<h4 id=\"队列有两种\">队列有两种：</h4> \n<ul><li>单队列</li><li>循环队列</li></ul> \n<h4 id=\"单队列就是常见的队列-每次添加元素时都是添加到队尾\">单队列就是常见的队列, 每次添加元素时，都是添加到队尾：</h4> \n<p>以数组实现的队列为例，初始时队列长度固定为 4，font 和 rear 均为 0：</p> \n<p><img src=\"https://img-blog.csdn.net/20161019143750127\" alt=\"这里写图片描述\" title=\"\"></p> \n<p>每添加一个元素，rear 后移一位。当添加四个元素后， rear 到了索引为 4 的位置：</p> \n<p><img src=\"https://img-blog.csdn.net/20161019144154538\" alt=\"这里写图片描述\" title=\"\"></p> \n<p>这时 a1,a2 出队，front 后移动到 2：</p> \n<p><img src=\"https://img-blog.csdn.net/20161019144302583\" alt=\"这里写图片描述\" title=\"\"></p> \n<p>这时想要再添加两个元素，但 rear 后移两位后就会越界：</p> \n<p><img src=\"https://img-blog.csdn.net/20161019144441240\" alt=\"这里写图片描述\" title=\"\"></p> \n<p>明明有三个空位，却只能再放入一个！这就是单队列的“<strong>假溢出</strong>”情况。</p> \n<h4 id=\"上述参考借鉴自-httpwwwnowamagicnetlibrarysvedadetail2350\">（上述参考借鉴自 <a href=\"http://www.nowamagic.net/librarys/veda/detail/2350\">http://www.nowamagic.net/librarys/veda/detail/2350</a>）</h4> \n<p>针对这种情况，解决办法就是后面满了，就再从头开始，也就是头尾相接的循环。这就是 <strong>“循环队列”</strong> 的概念。</p> \n<h4 id=\"循环队列\">循环队列:</h4> \n<p>循环队列中， <br> rear = (rear - size) % size</p> \n<p>接着上面的例子，当 rear 大于 队列长度时，rear = ( 5 - 5) % 5 = 0 :</p> \n<p><img src=\"https://img-blog.csdn.net/20161019152522910\" alt=\"这里写图片描述\" title=\"\"> </p> \n<p>这样继续添加时，还可以添加几个元素：</p> \n<p><img src=\"https://img-blog.csdn.net/20161019152853540\" alt=\"这里写图片描述\" title=\"\"></p> \n<p>那如何判断队列是否装满元素了呢，单使用 front == rear 无法判断究竟是空的还是满了。</p> \n<p>两种方法：</p> \n<ol><li>加个标志 flag ,初始为 false，添加满了置为 true；</li><li>不以 front = rear 为放满标志，改为 (rear - front) % size = 1。</li></ol> \n<p>法 2 的公式放满元素时<strong>空余了一个位置</strong>，这个公式是什么意思呢？</p> \n<p><img src=\"https://img-blog.csdn.net/20161019163758572\" alt=\"这里写图片描述\" title=\"\"></p> \n<p>接着上面的情况，当 rear 从后面添加元素跑到前面 0 时，再添加一个元素 a6，rear 后移一位到 1，这时 front = 2, (1 - 2) % 5 = 1, 满足放满条件。</p> \n<h4 id=\"因此当-rear-font-时队列中元素个数-rear-font\">因此，当 rear &gt; font 时，队列中元素个数 = rear - font;</h4> \n<h4 id=\"当-rear-font-时队列中元素分为两部分-size-font-和-rear-也就是-rear-size-font以上述图片为例队列中元素个数-1-5-2-4\">当 rear &lt; font 时，队列中元素分为两部分： size - font 和 rear ,也就是 rear + size - font。以上述图片为例，队列中元素个数 = 1 + 5 - 2 = 4.</h4> \n<p><img src=\"https://img-blog.csdn.net/20161019142319417\" alt=\"这里写图片描述\" title=\"\"></p> \n<h2 id=\"接着我们介绍-java-集合框架中的队列-queue\"><a name=\"t2\"></a><a name=\"t2\"></a>接着我们介绍 Java 集合框架中的队列 Queue</h2> \n<p><img src=\"https://img-blog.csdn.net/20161019004310645\" alt=\"这里写图片描述\" title=\"\"></p> \n<h4 id=\"java-集合中的-queue-继承自-collection-接口-deque-linkedlist-priorityqueue-blockingqueue-等类都实现了它\">Java 集合中的 Queue 继承自 <a href=\"http://blog.csdn.net/u011240877/article/details/52773577\">Collection 接口</a> ，Deque, LinkedList, PriorityQueue, BlockingQueue 等类都实现了它。</h4> \n<h4 id=\"queue-用来存放-等待处理元素-的集合这种场景一般用于缓冲并发访问\">Queue 用来存放 等待处理元素 的集合，这种场景一般用于缓冲、并发访问。</h4> \n<h4 id=\"除了继承-collection-接口的一些方法queue-还添加了额外的-添加删除查询操作\">除了继承 Collection 接口的一些方法，Queue 还添加了额外的 添加、删除、查询操作。</h4> \n<p><img src=\"https://img-blog.csdn.net/20161019004500256\" alt=\"这里写图片描述\" title=\"\"></p> \n<h4 id=\"添加删除查询这些个操作都提供了两种形式其中一种在操作失败时直接抛出异常而另一种则返回一个特殊的值\">添加、删除、查询这些个操作都提供了两种形式，其中一种在操作失败时直接抛出异常，而另一种则返回一个特殊的值：</h4> \n<p><img src=\"https://img-blog.csdn.net/20161019111111582\" alt=\"这里写图片描述\" title=\"\"></p> \n<h2 id=\"queue-方法介绍\"><a name=\"t3\"></a><a name=\"t3\"></a>Queue 方法介绍：</h2> \n<h3 id=\"1adde-offere-在尾部添加\"><a name=\"t4\"></a><a name=\"t4\"></a>1.add(E), offer(E) 在尾部添加:</h3> \n<pre class=\"prettyprint\"><code class=\"has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">boolean add(E e);\n\nboolean offer(E e);\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li></ul></pre> \n<h4 id=\"他们的共同之处是建议实现类禁止添加-null-元素否则会报空指针-nullpointerexception\">他们的共同之处是<strong>建议实现类</strong>禁止添加 null 元素，否则会报空指针 NullPointerException；</h4> \n<h4 id=\"不同之处在于-add-方法在添加失败比如队列已满时会报-一些运行时错误-错而-offer-方法即使在添加失败时也不会奔溃只会返回-false\">不同之处在于 add() 方法在添加失败（比如队列已满）时会报 一些运行时错误 错；而 offer() 方法即使在添加失败时也不会奔溃，只会返回 false。</h4> \n<p><strong>2016.11.21 添加</strong></p> \n<h3 id=\"注意\"><a name=\"t5\"></a><a name=\"t5\"></a><strong>注意</strong></h3> \n<h4 id=\"queue-是个接口它提供的-add-offer-方法初衷是希望子类能够禁止添加元素为-null这样可以避免在查询时返回-null-究竟是正确还是错误\">Queue 是个接口，它提供的 add, offer 方法初衷是希望子类能够禁止添加元素为 null，这样可以避免在查询时返回 null 究竟是正确还是错误。</h4> \n<h4 id=\"事实上大多数-queue-的实现类的确响应了-queue-接口的规定比如-arrayblockingqueuepriorityblockingqueue-等等\">事实上大多数 Queue 的实现类的确响应了 Queue 接口的规定，比如 ArrayBlockingQueue，PriorityBlockingQueue 等等。</h4> \n<h4 id=\"但还是有一些实现类没有这样要求比如-linkedlist\">但还是有一些实现类没有这样要求，比如 LinkedList。</h4> \n<h4 id=\"感谢-sumsear-指出\">感谢 <a href=\"http://blog.csdn.net/sumsear\">sumsear</a> 指出。</h4> \n<h3 id=\"2remove-poll-删除并返回头部\"><a name=\"t6\"></a><a name=\"t6\"></a>2.remove(), poll() 删除并返回头部：</h3> \n<pre class=\"prettyprint\"><code class=\"has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">E remove();\n\nE poll();\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li></ul></pre> \n<h4 id=\"当队列为空时-remove-方法会报-nosuchelementexception-错-而-poll-不会奔溃只会返回-null\">当队列为空时 remove() 方法会报 NoSuchElementException 错; 而 poll() 不会奔溃，只会返回 null。</h4> \n<h3 id=\"3element-peek-获取但不删除\"><a name=\"t7\"></a><a name=\"t7\"></a>3.element(), peek() 获取但不删除：</h3> \n<pre class=\"prettyprint\"><code class=\"has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">E element();\n\nE peek();\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li></ul></pre> \n<h4 id=\"当队列为空时-element-抛出异常peek-不会奔溃只会返回-null\">当队列为空时 element() 抛出异常；peek() 不会奔溃，只会返回 null。</h4> \n<h2 id=\"其他\"><a name=\"t8\"></a><a name=\"t8\"></a>其他</h2> \n<h4 id=\"1虽然-linkedlist-没有禁止添加-null但是一般情况下-queue-的实现类都不允许添加-null-元素为啥呢因为-poll-peek-方法在异常的时候会返回-null你添加了-null-以后当获取时不好分辨究竟是否正确返回\">1.虽然 LinkedList 没有禁止添加 null，但是一般情况下 Queue 的实现类都不允许添加 null 元素，为啥呢？因为 poll(), peek() 方法在异常的时候会返回 null，你添加了 null　以后，当获取时不好分辨究竟是否正确返回。</h4> \n<h4 id=\"2queue-一般都是-fifo-的但是也有例外比如优先队列-priority-queue它的顺序是根据自然排序或者自定义-comparator-的再比如-lifo-的队列跟栈一样后来进去的先出去\">2.Queue 一般都是 FIFO 的，但是也有例外，比如优先队列 priority queue（它的顺序是根据自然排序或者自定义 comparator 的）；再比如 LIFO 的队列（跟栈一样，后来进去的先出去）。</h4> \n<h4 id=\"不论进入出去的先后顺序是怎样的使用-removepoll-方法操作的都是-头部-的元素而插入的位置则不一定是在队尾了不同的-queue-会有不同的插入逻辑\">不论进入、出去的先后顺序是怎样的，使用 remove()，poll() 方法操作的都是 头部 的元素；而插入的位置则不一定是在队尾了，不同的 queue 会有不同的插入逻辑。</h4> \n<h2 id=\"thanks\"><a name=\"t9\"></a><a name=\"t9\"></a>Thanks</h2> \n<p><a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/queue.html\">https://docs.oracle.com/javase/tutorial/collections/interfaces/queue.html</a></p> \n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Queue.html\">https://docs.oracle.com/javase/8/docs/api/java/util/Queue.html</a></p> \n<p><a href=\"http://www.nowamagic.net/librarys/veda/detail/2350\">http://www.nowamagic.net/librarys/veda/detail/2350</a></p> \n<p><a href=\"http://www.nowamagic.net/librarys/veda/detail/2351\">http://www.nowamagic.net/librarys/veda/detail/2351</a></p>\n                </div>"
},
  {
    "category": "dataStruct",
    "qes": "Java集合--Set(基础)",
    "ans": "<div id=\"article_content\" class=\"article_content clearfix\">\n        <link rel=\"stylesheet\" href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-b5506197d8.css\">\n                <div id=\"content_views\" class=\"markdown_views prism-atom-one-dark\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n                        <path stroke-linecap=\"round\" d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n                    </svg>\n                    <h1><a name=\"t0\"></a><a name=\"t0\"></a><a id=\"JavaSet_0\"></a>Java集合–Set(基础)</h1> \n<p>Set继承于Collection接口，是一个不允许出现重复元素，并且无序的集合，主要有HashSet和TreeSet两大实现类。</p> \n<p>在判断重复元素的时候，Set集合会调用hashCode()和equal()方法来实现。</p> \n<p>HashSet是哈希表结构，主要利用HashMap的key来存储元素，计算插入元素的hashCode来获取元素在集合中的位置；</p> \n<p>TreeSet是红黑树结构，每一个元素都是树中的一个节点，插入的元素都会进行排序；</p> \n<p>Set集合框架结构：</p> \n<p><img src=\"https://upload-images.jianshu.io/upload_images/5621908-6d6c75cbd1581bb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/424/format/webp\" alt=\"img\"></p> \n<h3><a name=\"t1\"></a><a name=\"t1\"></a><a id=\"11_Set_14\"></a>1.1 Set常用方法</h3> \n<p>与List接口一样，Set接口也提供了集合操作的基本方法。</p> \n<p>但与List不同的是，Set还提供了equals(Object o)和hashCode()，供其子类重写，以实现对集合中插入重复元素的处理；</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Set</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>E<span class=\"token punctuation\">&gt;</span></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Collection</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>E<span class=\"token punctuation\">&gt;</span></span> <span class=\"token punctuation\">{<!-- --></span>\n\n    A<span class=\"token operator\">:</span>添加功能\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>E e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">addAll</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">E</span><span class=\"token operator\">&gt;</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    B<span class=\"token operator\">:</span>删除功能\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>Object o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span><span class=\"token operator\">&gt;</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    C<span class=\"token operator\">:</span>长度功能\n    <span class=\"token keyword\">int</span> <span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    D<span class=\"token operator\">:</span>判断功能\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>Object o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">containsAll</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span><span class=\"token operator\">&gt;</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">retainAll</span><span class=\"token punctuation\">(</span>Collection<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span><span class=\"token operator\">&gt;</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n    E<span class=\"token operator\">:</span>获取Set集合的迭代器：\n    Iterator<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>E<span class=\"token punctuation\">&gt;</span></span> <span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    F<span class=\"token operator\">:</span>把集合转换成数组\n    Object<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>T<span class=\"token punctuation\">&gt;</span></span> T<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">//判断元素是否重复，为子类提高重写方法</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>Object o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> <span class=\"token function\">hashCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li><li style=\"color: rgb(153, 153, 153);\">24</li><li style=\"color: rgb(153, 153, 153);\">25</li><li style=\"color: rgb(153, 153, 153);\">26</li><li style=\"color: rgb(153, 153, 153);\">27</li><li style=\"color: rgb(153, 153, 153);\">28</li><li style=\"color: rgb(153, 153, 153);\">29</li><li style=\"color: rgb(153, 153, 153);\">30</li><li style=\"color: rgb(153, 153, 153);\">31</li></ul></pre> \n<h3><a name=\"t2\"></a><a name=\"t2\"></a><a id=\"12_HashSet_54\"></a>1.2 HashSet</h3> \n<p>HashSet实现Set接口，底层由HashMap(后面讲解)来实现，为哈希表结构，新增元素相当于HashMap的key，value默认为一个固定的Object。在我看来，HashSet相当于一个阉割版的HashMap;</p> \n<p>当有元素插入的时候，会计算元素的hashCode值，将元素插入到哈希表对应的位置中来；</p> \n<p>它继承于AbstractSet，实现了Set, Cloneable, Serializable接口。</p> \n<p>(1)HashSet继承AbstractSet类，获得了Set接口大部分的实现，减少了实现此接口所需的工作，实际上是又继承了AbstractCollection类；</p> \n<p>(2)HashSet实现了Set接口，获取Set接口的方法，可以自定义具体实现，也可以继承AbstractSet类中的实现；</p> \n<p>(3)HashSet实现Cloneable，得到了clone()方法，可以实现克隆功能；</p> \n<p>(4)HashSet实现Serializable，表示可以被序列化，通过序列化去传输，典型的应用就是hessian协议。</p> \n<p>具有如下特点：</p> \n<ul><li>不允许出现重复因素；</li><li>允许插入Null值；</li><li>元素无序（添加顺序和遍历顺序不一致）；</li><li>线程不安全，若2个线程同时操作HashSet，必须通过代码实现同步；</li></ul> \n<h3><a name=\"t3\"></a><a name=\"t3\"></a><a id=\"13_HashSet_77\"></a>1.3 HashSet基本操作</h3> \n<p>HashSet底层由HashMap实现，插入的元素被当做是HashMap的key，根据hashCode值来确定集合中的位置，由于Set集合中并没有角标的概念，所以并没有像List一样提供get（）方法。当获取HashSet中某个元素时，只能通过遍历集合的方式进行equals()比较来实现；</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HashSetTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> agrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//创建HashSet集合：</span>\n        Set<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> hashSet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HashSet初始容量大小：\"</span><span class=\"token operator\">+</span>hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//元素添加：</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"is\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HashSet容量大小：\"</span><span class=\"token operator\">+</span>hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//迭代器遍历：</span>\n        Iterator<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> iterator <span class=\"token operator\">=</span> hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            String str <span class=\"token operator\">=</span> iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">//增强for循环</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>String str<span class=\"token operator\">:</span>hashSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n                System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"你就是我想要的元素:\"</span><span class=\"token operator\">+</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//元素删除：</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HashSet元素大小：\"</span> <span class=\"token operator\">+</span> hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HashSet元素大小：\"</span> <span class=\"token operator\">+</span> hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//集合判断：</span>\n        <span class=\"token keyword\">boolean</span> isEmpty <span class=\"token operator\">=</span> hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HashSet是否为空：\"</span> <span class=\"token operator\">+</span> isEmpty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">boolean</span> isContains <span class=\"token operator\">=</span> hashSet<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HashSet是否为空：\"</span> <span class=\"token operator\">+</span> isContains<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li><li style=\"color: rgb(153, 153, 153);\">24</li><li style=\"color: rgb(153, 153, 153);\">25</li><li style=\"color: rgb(153, 153, 153);\">26</li><li style=\"color: rgb(153, 153, 153);\">27</li><li style=\"color: rgb(153, 153, 153);\">28</li><li style=\"color: rgb(153, 153, 153);\">29</li><li style=\"color: rgb(153, 153, 153);\">30</li><li style=\"color: rgb(153, 153, 153);\">31</li><li style=\"color: rgb(153, 153, 153);\">32</li><li style=\"color: rgb(153, 153, 153);\">33</li><li style=\"color: rgb(153, 153, 153);\">34</li><li style=\"color: rgb(153, 153, 153);\">35</li><li style=\"color: rgb(153, 153, 153);\">36</li><li style=\"color: rgb(153, 153, 153);\">37</li><li style=\"color: rgb(153, 153, 153);\">38</li><li style=\"color: rgb(153, 153, 153);\">39</li><li style=\"color: rgb(153, 153, 153);\">40</li><li style=\"color: rgb(153, 153, 153);\">41</li><li style=\"color: rgb(153, 153, 153);\">42</li><li style=\"color: rgb(153, 153, 153);\">43</li><li style=\"color: rgb(153, 153, 153);\">44</li></ul></pre> \n<h3><a name=\"t4\"></a><a name=\"t4\"></a><a id=\"14_HashSet_128\"></a>1.4 HashSet元素添加分析</h3> \n<p>Set集合不允许添加重复元素，那么到底是个怎么情况呢？</p> \n<p>来看一个简单的例子：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HashSetTest</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> agrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//hashCode() 和 equals()测试：</span>\n        <span class=\"token function\">hashCodeAndEquals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">hashCodeAndEquals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//第一个 Set集合：</span>\n        Set<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> set1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        String str1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        String str2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        set1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>str1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        set1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>str2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"长度：\"</span><span class=\"token operator\">+</span>set1<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\",内容为：\"</span><span class=\"token operator\">+</span>set1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//第二个 Set集合：</span>\n        Set<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span> set2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        App app1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        app1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        App app2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        app2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        set2<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        set2<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"长度：\"</span><span class=\"token operator\">+</span>set2<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\",内容为：\"</span><span class=\"token operator\">+</span>set2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//第三个 Set集合：</span>\n        Set<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span> set3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        App app3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        app3<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        set3<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        set3<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"长度：\"</span><span class=\"token operator\">+</span>set3<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\",内容为：\"</span><span class=\"token operator\">+</span>set3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li><li style=\"color: rgb(153, 153, 153);\">24</li><li style=\"color: rgb(153, 153, 153);\">25</li><li style=\"color: rgb(153, 153, 153);\">26</li><li style=\"color: rgb(153, 153, 153);\">27</li><li style=\"color: rgb(153, 153, 153);\">28</li><li style=\"color: rgb(153, 153, 153);\">29</li><li style=\"color: rgb(153, 153, 153);\">30</li><li style=\"color: rgb(153, 153, 153);\">31</li><li style=\"color: rgb(153, 153, 153);\">32</li><li style=\"color: rgb(153, 153, 153);\">33</li><li style=\"color: rgb(153, 153, 153);\">34</li><li style=\"color: rgb(153, 153, 153);\">35</li><li style=\"color: rgb(153, 153, 153);\">36</li></ul></pre> \n<p>测试结果：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">长度：<span class=\"token number\">1</span><span class=\"token punctuation\">,</span>内容为：<span class=\"token punctuation\">[</span>jiaboyan<span class=\"token punctuation\">]</span>\n长度：<span class=\"token number\">2</span><span class=\"token punctuation\">,</span>内容为：<span class=\"token punctuation\">[</span>com<span class=\"token punctuation\">.</span>jiaboyan<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span>App<span class=\"token annotation punctuation\">@efb78af</span><span class=\"token punctuation\">,</span> com<span class=\"token punctuation\">.</span>jiaboyan<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span>App<span class=\"token annotation punctuation\">@5f3306ad</span><span class=\"token punctuation\">]</span>\n长度：<span class=\"token number\">1</span><span class=\"token punctuation\">,</span>内容为：<span class=\"token punctuation\">[</span>com<span class=\"token punctuation\">.</span>jiaboyan<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span>App<span class=\"token annotation punctuation\">@1fb030d8</span><span class=\"token punctuation\">]</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li></ul></pre> \n<p>可以看到，第一个Set集合中最终只有一个元素；第二个Set集合保留了2个元素；第三个集合也只有1个元素；</p> \n<p>究竟是什么原因呢？</p> \n<p>让我们来看看<strong>HashSet</strong>的add(E e)方法：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>E e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> PRESENT<span class=\"token punctuation\">)</span><span class=\"token operator\">==</span>null<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li></ul></pre> \n<p>在底层HashSet调用了<strong>HashMap</strong>的put(K key, V value)方法:</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> V <span class=\"token function\">put</span><span class=\"token punctuation\">(</span>K key<span class=\"token punctuation\">,</span> V value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>table <span class=\"token operator\">==</span> EMPTY_TABLE<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token function\">inflateTable</span><span class=\"token punctuation\">(</span>threshold<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key <span class=\"token operator\">==</span> null<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">putForNullKey</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> hash <span class=\"token operator\">=</span> <span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token function\">indexFor</span><span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">,</span> table<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>Entry<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>K<span class=\"token punctuation\">,</span>V<span class=\"token punctuation\">&gt;</span></span> e <span class=\"token operator\">=</span> table<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> e <span class=\"token operator\">!=</span> null<span class=\"token punctuation\">;</span> e <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        Object k<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>hash <span class=\"token operator\">==</span> hash <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>k <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> key <span class=\"token operator\">||</span> key<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            V oldValue <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n            e<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">recordAccess</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> oldValue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    modCount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">addEntry</span><span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> null<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li></ul></pre> \n<p>通过查看以上的源码，我们可以了解到：实际的逻辑都是在HashMap的put()方法中。</p> \n<p>int hash = hash(key) 对传入的key计算hash值；</p> \n<p>int i = indexFor(hash, table.length) 对hash值进行转换，转换成数组的index(HashMap中底层存储使用了Entry&lt;K,V&gt;[]数组)；</p> \n<p>for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) 判断对应index下是否存在元素；</p> \n<p>如果存在，则if(e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k)))判断；</p> \n<p>如果不存在，则addEntry(hash, key, value, i)直接添加；</p> \n<p>简单概括如下：</p> \n<p>在向HashMap中添加元素时，先判断key的hashCode值是否相同，如果相同，则调用equals()、==进行判断，若相同则覆盖原有元素；如果不同，则直接向Map中添加元素；</p> \n<p>反过来，我们在看下上面的例子：</p> \n<p>在第一个Set集合中，我们new了两个String对象，赋了相同的值。当传入到HashMap中时，key均为“jiaboyan”，所以hash和i的值都相同。进行if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k)))判断，由于String对象重写了equals()方法，所以在((k = e.key) == key || key.equals(k))判断时，返回了true，所以第二次的插入并不会增加Set集合的长度；</p> \n<p>第二个Set集合中，也是new了两个对象，但没有重写equals()方法（底层调用的Object的equals()，也就是==判断），所以会增加2个元素；</p> \n<p>第三个Set集合中，只new了一个对象，调用的两次add方法都添加的这个新new的对象，所以也只是保留了1个元素；</p> \n<h3><a name=\"t5\"></a><a name=\"t5\"></a><a id=\"15_TreeSet_243\"></a>1.5 TreeSet</h3> \n<p>从名字上可以看出，此集合的实现和树结构有关。与HashSet集合类似，TreeSet也是基于Map来实现，具体实现<strong>TreeMap</strong>(后面讲解)，其底层结构为<strong>红黑树</strong>（特殊的二叉查找树）；</p> \n<p>与HashSet不同的是，TreeSet具有排序功能，分为自然排序(123456)和自定义排序两类，默认是自然排序；在程序中，我们可以按照任意顺序将元素插入到集合中，等到遍历时TreeSet会按照一定顺序输出–倒序或者升序；</p> \n<p>它继承AbstractSet，实现NavigableSet, Cloneable, Serializable接口。</p> \n<p>（1）与HashSet同理，TreeSet继承AbstractSet类，获得了Set集合基础实现操作；</p> \n<p>（2）TreeSet实现NavigableSet接口，而NavigableSet又扩展了SortedSet接口。这两个接口主要定义了搜索元素的能力，例如给定某个元素，查找该集合中比给定元素大于、小于、等于的元素集合，或者比给定元素大于、小于、等于的元素个数；简单地说，实现NavigableSet接口使得TreeSet具备了元素搜索功能；</p> \n<p>（3）TreeSet实现Cloneable接口，意味着它也可以被克隆；</p> \n<p>（4）TreeSet实现了Serializable接口，可以被序列化，可以使用hessian协议来传输；</p> \n<p>具有如下特点：</p> \n<ul><li>对插入的元素进行排序，是一个有序的集合（主要与HashSet的区别）;</li><li>底层使用红黑树结构，而不是哈希表结构；</li><li>允许插入Null值；</li><li>不允许插入重复元素；</li><li>线程不安全；</li></ul> \n<h3><a name=\"t6\"></a><a name=\"t6\"></a><a id=\"16_TreeSet_267\"></a>1.6 TreeSet基本操作</h3> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TreeSetTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> agrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        TreeSet<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> treeSet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TreeSet初始化容量大小：\"</span><span class=\"token operator\">+</span>treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//元素添加：</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TreeSet容量大小：\"</span> <span class=\"token operator\">+</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TreeSet元素顺序为：\"</span> <span class=\"token operator\">+</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//增加for循环遍历：</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>String str<span class=\"token operator\">:</span>treeSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"遍历元素：\"</span><span class=\"token operator\">+</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//迭代器遍历：升序</span>\n        Iterator<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> iteratorAesc <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>iteratorAesc<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            String str <span class=\"token operator\">=</span> iteratorAesc<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"遍历元素升序：\"</span><span class=\"token operator\">+</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//迭代器遍历：降序</span>\n        Iterator<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> iteratorDesc <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">descendingIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>iteratorDesc<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            String str <span class=\"token operator\">=</span> iteratorDesc<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"遍历元素降序：\"</span><span class=\"token operator\">+</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//元素获取:实现NavigableSet接口</span>\n        String firstEle <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//获取TreeSet头节点：</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TreeSet头节点为：\"</span> <span class=\"token operator\">+</span> firstEle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 获取指定元素之前的所有元素集合：(不包含指定元素)</span>\n        SortedSet<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> headSet <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">headSet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan节点之前的元素为：\"</span><span class=\"token operator\">+</span>headSet<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//获取给定元素之间的集合：（包含头，不包含尾）</span>\n        SortedSet subSet <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">subSet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1--jiaboan之间节点元素为：\"</span><span class=\"token operator\">+</span>subSet<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//集合判断：</span>\n        <span class=\"token keyword\">boolean</span> isEmpty <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TreeSet是否为空：\"</span><span class=\"token operator\">+</span>isEmpty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">boolean</span> isContain <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"who\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TreeSet是否包含who元素：\"</span><span class=\"token operator\">+</span>isContain<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//元素删除：</span>\n        <span class=\"token keyword\">boolean</span> jiaboyanRemove <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jiaboyan元素是否被删除\"</span><span class=\"token operator\">+</span>jiaboyanRemove<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//集合中不存在的元素，删除返回false</span>\n        <span class=\"token keyword\">boolean</span> whoRemove <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"who\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"who元素是否被删除\"</span><span class=\"token operator\">+</span>whoRemove<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token comment\">//删除并返回第一个元素：如果set集合不存在元素，则返回null</span>\n        String pollFirst <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">pollFirst</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"删除的第一个元素：\"</span><span class=\"token operator\">+</span>pollFirst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//删除并返回最后一个元素：如果set集合不存在元素，则返回null</span>\n        String pollLast <span class=\"token operator\">=</span> treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">pollLast</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"删除的最后一个元素：\"</span><span class=\"token operator\">+</span>pollLast<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//清空集合:</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li><li style=\"color: rgb(153, 153, 153);\">24</li><li style=\"color: rgb(153, 153, 153);\">25</li><li style=\"color: rgb(153, 153, 153);\">26</li><li style=\"color: rgb(153, 153, 153);\">27</li><li style=\"color: rgb(153, 153, 153);\">28</li><li style=\"color: rgb(153, 153, 153);\">29</li><li style=\"color: rgb(153, 153, 153);\">30</li><li style=\"color: rgb(153, 153, 153);\">31</li><li style=\"color: rgb(153, 153, 153);\">32</li><li style=\"color: rgb(153, 153, 153);\">33</li><li style=\"color: rgb(153, 153, 153);\">34</li><li style=\"color: rgb(153, 153, 153);\">35</li><li style=\"color: rgb(153, 153, 153);\">36</li><li style=\"color: rgb(153, 153, 153);\">37</li><li style=\"color: rgb(153, 153, 153);\">38</li><li style=\"color: rgb(153, 153, 153);\">39</li><li style=\"color: rgb(153, 153, 153);\">40</li><li style=\"color: rgb(153, 153, 153);\">41</li><li style=\"color: rgb(153, 153, 153);\">42</li><li style=\"color: rgb(153, 153, 153);\">43</li><li style=\"color: rgb(153, 153, 153);\">44</li><li style=\"color: rgb(153, 153, 153);\">45</li><li style=\"color: rgb(153, 153, 153);\">46</li><li style=\"color: rgb(153, 153, 153);\">47</li><li style=\"color: rgb(153, 153, 153);\">48</li><li style=\"color: rgb(153, 153, 153);\">49</li><li style=\"color: rgb(153, 153, 153);\">50</li><li style=\"color: rgb(153, 153, 153);\">51</li><li style=\"color: rgb(153, 153, 153);\">52</li><li style=\"color: rgb(153, 153, 153);\">53</li><li style=\"color: rgb(153, 153, 153);\">54</li><li style=\"color: rgb(153, 153, 153);\">55</li><li style=\"color: rgb(153, 153, 153);\">56</li><li style=\"color: rgb(153, 153, 153);\">57</li><li style=\"color: rgb(153, 153, 153);\">58</li><li style=\"color: rgb(153, 153, 153);\">59</li><li style=\"color: rgb(153, 153, 153);\">60</li><li style=\"color: rgb(153, 153, 153);\">61</li><li style=\"color: rgb(153, 153, 153);\">62</li><li style=\"color: rgb(153, 153, 153);\">63</li><li style=\"color: rgb(153, 153, 153);\">64</li><li style=\"color: rgb(153, 153, 153);\">65</li><li style=\"color: rgb(153, 153, 153);\">66</li><li style=\"color: rgb(153, 153, 153);\">67</li><li style=\"color: rgb(153, 153, 153);\">68</li><li style=\"color: rgb(153, 153, 153);\">69</li><li style=\"color: rgb(153, 153, 153);\">70</li><li style=\"color: rgb(153, 153, 153);\">71</li><li style=\"color: rgb(153, 153, 153);\">72</li><li style=\"color: rgb(153, 153, 153);\">73</li><li style=\"color: rgb(153, 153, 153);\">74</li></ul></pre> \n<h3><a name=\"t7\"></a><a name=\"t7\"></a><a id=\"17_TreeSet_346\"></a>1.7 TreeSet元素排序</h3> \n<p>在前面的章节，我们讲到了TreeSet是一个有序集合，可以对集合元素排序，其中分为自然排序和自定义排序，那么这两种方式如何实现呢？</p> \n<p>首先，我们通过JDK提供的对象来展示，我们使用String、Integer：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TreeSetTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> agrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token function\">naturalSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//自然排序顺序：升序</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">naturalSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        TreeSet<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> treeSetString <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"z\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"字母顺序：\"</span> <span class=\"token operator\">+</span> treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        TreeSet<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>Integer<span class=\"token punctuation\">&gt;</span></span> treeSetInteger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>Integer<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">24</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"数字顺序：\"</span> <span class=\"token operator\">+</span> treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li></ul></pre> \n<h3><a name=\"t8\"></a><a name=\"t8\"></a><a id=\"17_TreeSet_378\"></a>1.7 TreeSet元素排序</h3> \n<p>在前面的章节，我们讲到了TreeSet是一个有序集合，可以对集合元素排序，其中分为自然排序和自定义排序，那么这两种方式如何实现呢？</p> \n<p>首先，我们通过JDK提供的对象来展示，我们使用String、Integer：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TreeSetTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> agrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token function\">naturalSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//自然排序顺序：升序</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">naturalSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        TreeSet<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span> treeSetString <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>String<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"z\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"字母顺序：\"</span> <span class=\"token operator\">+</span> treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        TreeSet<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>Integer<span class=\"token punctuation\">&gt;</span></span> treeSetInteger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>Integer<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">24</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>treeSetInteger<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"数字顺序：\"</span> <span class=\"token operator\">+</span> treeSetString<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li></ul></pre> \n<p>测试结果：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">字母顺序：<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> z<span class=\"token punctuation\">]</span>\n数字顺序：<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">24</span><span class=\"token punctuation\">]</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li></ul></pre> \n<p>接下来，我们自定义对象，看能否实现：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">private</span> String name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> Integer age<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span>String name<span class=\"token punctuation\">,</span>Integer age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> String <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>String name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> Integer <span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setAge</span><span class=\"token punctuation\">(</span>Integer age<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"Hello World!\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TreeSetTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> agrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token function\">customSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n     <span class=\"token comment\">//自定义排序顺序：升序</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">customSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        TreeSet<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span> treeSet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//排序对象：</span>\n        App app1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        App app2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        App app3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        App app4 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//添加到集合：</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TreeSet集合顺序为：\"</span><span class=\"token operator\">+</span>treeSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li><li style=\"color: rgb(153, 153, 153);\">24</li><li style=\"color: rgb(153, 153, 153);\">25</li><li style=\"color: rgb(153, 153, 153);\">26</li><li style=\"color: rgb(153, 153, 153);\">27</li><li style=\"color: rgb(153, 153, 153);\">28</li><li style=\"color: rgb(153, 153, 153);\">29</li><li style=\"color: rgb(153, 153, 153);\">30</li><li style=\"color: rgb(153, 153, 153);\">31</li><li style=\"color: rgb(153, 153, 153);\">32</li><li style=\"color: rgb(153, 153, 153);\">33</li><li style=\"color: rgb(153, 153, 153);\">34</li><li style=\"color: rgb(153, 153, 153);\">35</li><li style=\"color: rgb(153, 153, 153);\">36</li><li style=\"color: rgb(153, 153, 153);\">37</li><li style=\"color: rgb(153, 153, 153);\">38</li><li style=\"color: rgb(153, 153, 153);\">39</li><li style=\"color: rgb(153, 153, 153);\">40</li><li style=\"color: rgb(153, 153, 153);\">41</li><li style=\"color: rgb(153, 153, 153);\">42</li><li style=\"color: rgb(153, 153, 153);\">43</li><li style=\"color: rgb(153, 153, 153);\">44</li><li style=\"color: rgb(153, 153, 153);\">45</li><li style=\"color: rgb(153, 153, 153);\">46</li><li style=\"color: rgb(153, 153, 153);\">47</li><li style=\"color: rgb(153, 153, 153);\">48</li><li style=\"color: rgb(153, 153, 153);\">49</li><li style=\"color: rgb(153, 153, 153);\">50</li><li style=\"color: rgb(153, 153, 153);\">51</li><li style=\"color: rgb(153, 153, 153);\">52</li><li style=\"color: rgb(153, 153, 153);\">53</li><li style=\"color: rgb(153, 153, 153);\">54</li><li style=\"color: rgb(153, 153, 153);\">55</li><li style=\"color: rgb(153, 153, 153);\">56</li><li style=\"color: rgb(153, 153, 153);\">57</li></ul></pre> \n<p>测试结果：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">抛出异常：提示App不能转换为Comparable对象：\nException in thread <span class=\"token string\">\"main\"</span> java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>ClassCastException<span class=\"token operator\">:</span> com<span class=\"token punctuation\">.</span>jiaboyan<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span>App cannot be cast to java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>Comparable\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li></ul></pre> \n<p>为什么会报错呢？</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// type (and possibly null) check</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>Object k1<span class=\"token punctuation\">,</span> Object k2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> comparator<span class=\"token operator\">==</span>null <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>Comparable<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">super</span> K<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span>k1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>K<span class=\"token punctuation\">)</span>k2<span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">:</span> comparator<span class=\"token punctuation\">.</span><span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>K<span class=\"token punctuation\">)</span>k1<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>K<span class=\"token punctuation\">)</span>k2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li></ul></pre> \n<p>通过查看源码发现，在TreeSet调用add方法时，会调用到底层TreeMap的put方法，在put方法中会调用到compare(key, key)方法，进行key大小的比较；</p> \n<p>在比较的时候，会将传入的key进行类型强转，所以当我们自定义的App类进行比较的时候，自然就会抛出异常，因为App类并没有实现Comparable接口；</p> \n<p>将App实现Comparable接口，在做比较:</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Comparable</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">private</span> String name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> Integer age<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span>String name<span class=\"token punctuation\">,</span>Integer age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> String <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>String name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> Integer <span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setAge</span><span class=\"token punctuation\">(</span>Integer age<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//自定义比较：先比较name的长度，在比较age的大小；</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span>App app<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//比较name的长度：</span>\n        <span class=\"token keyword\">int</span> num <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> app<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//如果name长度一样，则比较年龄的大小：</span>\n        <span class=\"token keyword\">return</span> num <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">-</span> app<span class=\"token punctuation\">.</span>age <span class=\"token operator\">:</span> num<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> String <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"App{\"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"name='\"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">'\\''</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\", age=\"</span> <span class=\"token operator\">+</span> age <span class=\"token operator\">+</span>\n                <span class=\"token string\">'}'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li><li style=\"color: rgb(153, 153, 153);\">24</li><li style=\"color: rgb(153, 153, 153);\">25</li><li style=\"color: rgb(153, 153, 153);\">26</li><li style=\"color: rgb(153, 153, 153);\">27</li><li style=\"color: rgb(153, 153, 153);\">28</li><li style=\"color: rgb(153, 153, 153);\">29</li><li style=\"color: rgb(153, 153, 153);\">30</li><li style=\"color: rgb(153, 153, 153);\">31</li><li style=\"color: rgb(153, 153, 153);\">32</li><li style=\"color: rgb(153, 153, 153);\">33</li><li style=\"color: rgb(153, 153, 153);\">34</li><li style=\"color: rgb(153, 153, 153);\">35</li></ul></pre> \n<p>测试结果如下：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">TreeSet集合顺序为：<span class=\"token punctuation\">[</span>App<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token operator\">=</span><span class=\"token string\">'my'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">15</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> App<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token operator\">=</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">25</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> App<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token operator\">=</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> App<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token operator\">=</span><span class=\"token string\">'world'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li></ul></pre> \n<p>此外，还有另一种方式，那就是实现Comparetor接口，并重写compare方法；</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token comment\">//自定义App类的比较器：</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppComparator</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Comparator</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token comment\">//比较方法：先比较年龄，年龄若相同在比较名字长度；</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>App app1<span class=\"token punctuation\">,</span> App app2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">int</span> num <span class=\"token operator\">=</span> app1<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> app2<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> num <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> app1<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> app2<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> num<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li></ul></pre> \n<p>此时，App不用在实现Comparerable接口了，单纯的定义一个类即可；</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">private</span> String name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> Integer age<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span>String name<span class=\"token punctuation\">,</span>Integer age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> String <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>String name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> Integer <span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setAge</span><span class=\"token punctuation\">(</span>Integer age<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"Hello World!\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TreeSetTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> agrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token function\">customSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//自定义比较器：升序</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">customComparatorSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        TreeSet<span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span> treeSet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeSet</span><span class=\"token generics function\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">AppComparator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//排序对象：</span>\n        App app1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        App app2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        App app3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        App app4 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//添加到集合：</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        treeSet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>app4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        System<span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TreeSet集合顺序为：\"</span><span class=\"token operator\">+</span>treeSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li><li style=\"color: rgb(153, 153, 153);\">6</li><li style=\"color: rgb(153, 153, 153);\">7</li><li style=\"color: rgb(153, 153, 153);\">8</li><li style=\"color: rgb(153, 153, 153);\">9</li><li style=\"color: rgb(153, 153, 153);\">10</li><li style=\"color: rgb(153, 153, 153);\">11</li><li style=\"color: rgb(153, 153, 153);\">12</li><li style=\"color: rgb(153, 153, 153);\">13</li><li style=\"color: rgb(153, 153, 153);\">14</li><li style=\"color: rgb(153, 153, 153);\">15</li><li style=\"color: rgb(153, 153, 153);\">16</li><li style=\"color: rgb(153, 153, 153);\">17</li><li style=\"color: rgb(153, 153, 153);\">18</li><li style=\"color: rgb(153, 153, 153);\">19</li><li style=\"color: rgb(153, 153, 153);\">20</li><li style=\"color: rgb(153, 153, 153);\">21</li><li style=\"color: rgb(153, 153, 153);\">22</li><li style=\"color: rgb(153, 153, 153);\">23</li><li style=\"color: rgb(153, 153, 153);\">24</li><li style=\"color: rgb(153, 153, 153);\">25</li><li style=\"color: rgb(153, 153, 153);\">26</li><li style=\"color: rgb(153, 153, 153);\">27</li><li style=\"color: rgb(153, 153, 153);\">28</li><li style=\"color: rgb(153, 153, 153);\">29</li><li style=\"color: rgb(153, 153, 153);\">30</li><li style=\"color: rgb(153, 153, 153);\">31</li><li style=\"color: rgb(153, 153, 153);\">32</li><li style=\"color: rgb(153, 153, 153);\">33</li><li style=\"color: rgb(153, 153, 153);\">34</li><li style=\"color: rgb(153, 153, 153);\">35</li><li style=\"color: rgb(153, 153, 153);\">36</li><li style=\"color: rgb(153, 153, 153);\">37</li><li style=\"color: rgb(153, 153, 153);\">38</li><li style=\"color: rgb(153, 153, 153);\">39</li><li style=\"color: rgb(153, 153, 153);\">40</li><li style=\"color: rgb(153, 153, 153);\">41</li><li style=\"color: rgb(153, 153, 153);\">42</li><li style=\"color: rgb(153, 153, 153);\">43</li><li style=\"color: rgb(153, 153, 153);\">44</li><li style=\"color: rgb(153, 153, 153);\">45</li><li style=\"color: rgb(153, 153, 153);\">46</li><li style=\"color: rgb(153, 153, 153);\">47</li><li style=\"color: rgb(153, 153, 153);\">48</li><li style=\"color: rgb(153, 153, 153);\">49</li><li style=\"color: rgb(153, 153, 153);\">50</li><li style=\"color: rgb(153, 153, 153);\">51</li><li style=\"color: rgb(153, 153, 153);\">52</li><li style=\"color: rgb(153, 153, 153);\">53</li><li style=\"color: rgb(153, 153, 153);\">54</li><li style=\"color: rgb(153, 153, 153);\">55</li><li style=\"color: rgb(153, 153, 153);\">56</li><li style=\"color: rgb(153, 153, 153);\">57</li><li style=\"color: rgb(153, 153, 153);\">58</li></ul></pre> \n<p>测试结果：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-java has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">TreeSet集合顺序为：<span class=\"token punctuation\">[</span>App<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token operator\">=</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> App<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token operator\">=</span><span class=\"token string\">'my'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">15</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> App<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token operator\">=</span><span class=\"token string\">'world'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> App<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token operator\">=</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">25</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li></ul></pre> \n<p>最后，在说下关于compareTo()、compare()方法：</p> \n<pre class=\"prettyprint\"><code class=\"prism language-txt has-numbering\" onclick=\"mdcp.signin(event)\" style=\"position: unset;\">结果返回大于0时，方法前面的值大于方法中的值；\n\n结果返回等于0时，方法前面的值等于方法中的值；\n\n结果返回小于0时，方法前面的值小于方法中的值；\n<div class=\"hljs-button signin\" data-title=\"登录后复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\"></div></code><ul class=\"pre-numbering\" style=\"\"><li style=\"color: rgb(153, 153, 153);\">1</li><li style=\"color: rgb(153, 153, 153);\">2</li><li style=\"color: rgb(153, 153, 153);\">3</li><li style=\"color: rgb(153, 153, 153);\">4</li><li style=\"color: rgb(153, 153, 153);\">5</li></ul></pre>\n                </div><div data-report-view=\"{&quot;mod&quot;:&quot;1585297308_001&quot;,&quot;dest&quot;:&quot;https://blog.csdn.net/a303549861/article/details/87375731&quot;,&quot;extend1&quot;:&quot;pc&quot;,&quot;ab&quot;:&quot;new&quot;}\"><div></div></div>\n                <link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-10218d227c.css\" rel=\"stylesheet\">\n                <link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-6aa8c38f9a.css\" rel=\"stylesheet\">\n        </div>"
  },
  {
    "category": "dataStruct",
    "qes": "红黑树图解",
    "ans": "<a href =  href=\"https://juejin.im/post/6844903519632228365\">地址</a><div itemprop=\"articleBody\" class=\"article-content\" data-v-064b8453=\"\"><div class=\"markdown-body\"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:\"\"}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><p>&#8203;<img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60078667ae9?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60078667ae9?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60078ef6031?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60078ef6031?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600783fdc59?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600783fdc59?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60079653588?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60079653588?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p>————————————</p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/1/160123dc5325169a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/1/160123dc5325169a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/1/160123dc538f1b37?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/1/160123dc538f1b37?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60079ed51e8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60079ed51e8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600793a119c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600793a119c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"><br></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b13539f9?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b13539f9?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b4ff7ba5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b4ff7ba5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b14aa857?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b14aa857?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b1f91370?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b1f91370?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p>————————————</p><p><br></p><p><br></p><p></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b4d1fb1c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b4d1fb1c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b8b3be5b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600b8b3be5b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600d563a600?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600d563a600?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p>二叉查找树（BST）具备什么特性呢？</p><p><br></p><p>1.<b>左</b>子树上所有结点的值均<b>小于或等于</b>它的根结点的值。</p><p>2.<b>右</b>子树上所有结点的值均<b>大于或等于</b>它的根结点的值。</p><p>3.左、右子树也分别为二叉排序树。</p><p><br></p><p>下图中这棵树，就是一颗典型的二叉查找树：</p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600eb27d6ef?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"693\" data-height=\"383\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600eb27d6ef?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600ea3ce978?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600ea3ce978?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p>1.查看根节点<b>9</b>：</p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600ea940506?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"702\" data-height=\"395\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600ea940506?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p>2.由于<b>10 &gt; 9</b>，因此查看右孩子<b>13</b>：</p><p><br></p><p><img class=\"lazyload inited loaded\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600eb4a3f4f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"735\" data-height=\"395\" src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600eb4a3f4f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\"></p><p><br></p><p><br></p><p>3.由于<b>10 &lt; 13</b>，因此查看左孩子<b>11</b>：</p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b600eba75085?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"741\" data-height=\"402\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;741&quot; height=&quot;402&quot;></svg>\"></p><p><br></p><p><br></p><p>4.由于<b>10 &lt; 11</b>，因此查看左孩子<b>10</b>，发现10正是要查找的节点：</p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60103b74671?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"741\" data-height=\"401\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;741&quot; height=&quot;401&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b601159cab36?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b601104a472b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6011bf11e80?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b601174850b8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6012966ed8a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b601325ba117?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p>假设初始的二叉查找树只有三个节点，根节点值为9，左孩子值为8，右孩子值为12：</p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6013c9aafc5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"375\" data-height=\"179\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;375&quot; height=&quot;179&quot;></svg>\"></p><p><br></p><p><br></p><p>接下来我们依次插入如下五个节点：7,6,5,4,3。依照二叉查找树的特性，结果会变成什么样呢？</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6014331f371?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"550\" data-height=\"625\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;550&quot; height=&quot;625&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6014283a1a3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60159bed929?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60144265a26?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6015ca1021f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p>1.节点是红色或黑色。</p><p>2.根节点是黑色。</p><p>3.每个叶子节点都是黑色的空节点（NIL节点）。</p><p>4 每个红色节点的两个子节点都是黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)</p><p>5.从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。</p><p><br></p><p>下图中这棵树，就是一颗典型的红黑树：</p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6016e143cf3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"814\" data-height=\"466\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;814&quot; height=&quot;466&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6016ed2c77e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60176c96a2c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6017c52c2b8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p>什么情况下会破坏红黑树的规则，什么情况下不会破坏规则呢？我们举两个简单的栗子：</p><p><br></p><p>1.向原红黑树插入值为<b>14</b>的新节点：</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b601956a02ff?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"814\" data-height=\"481\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;814&quot; height=&quot;481&quot;></svg>\"></p><p><br></p><p><br></p><p>由于父节点15是黑色节点，因此这种情况并不会破坏红黑树的规则，无需做任何调整。</p><p><br></p><p><br></p><p></p><p>2.向原红黑树插入值为<b>21</b>的新节点：</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60192dd75db?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"814\" data-height=\"580\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;814&quot; height=&quot;580&quot;></svg>\"></p><p><br></p><p><br></p><p>由于父节点22是红色节点，因此这种情况打破了红黑树的规则4（每个红色节点的两个子节点都是黑色），必须进行调整，使之重新符合红黑树的规则。</p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6019a7873e6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60270dbedb7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><b>变色：</b></p><p><b><br></b></p><p>为了重新符合红黑树的规则，尝试把红色节点变为黑色，或者把黑色节点变为红色。</p><p><br></p><p>下图所表示的是红黑树的一部分，需要注意节点25并非根节点。因为节点21和节点22连续出现了红色，不符合规则4，所以把节点22从红色变成黑色：</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602995465b0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"867\" data-height=\"360\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;867&quot; height=&quot;360&quot;></svg>\"></p><p><br></p><p><br></p><p>但这样并不算完，因为凭空多出的黑色节点打破了规则5，所以发生连锁反应，需要继续把节点25从黑色变成红色：</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6021ca38237?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"867\" data-height=\"360\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;867&quot; height=&quot;360&quot;></svg>\"></p><p><br></p><p><br></p><p>此时仍然没有结束，因为节点25和节点27又形成了两个连续的红色节点，需要继续把节点27从红色变成黑色：</p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602acf13b5d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"867\" data-height=\"360\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;867&quot; height=&quot;360&quot;></svg>\"></p><p><br></p><p><br></p><p><b>左旋转：</b></p><p><b><br></b></p><p><b>逆时针</b>旋转红黑树的两个节点，使得父节点被自己的右孩子取代，而自己成为自己的左孩子。说起来很怪异，大家看下图：</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60230926ead?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"668\" data-height=\"336\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;668&quot; height=&quot;336&quot;></svg>\"></p><p><br></p><p>图中，身为右孩子的Y取代了X的位置，而X变成了自己的左孩子。此为左旋转。</p><p><br></p><p><br></p><p><b>右旋转：</b></p><p><b><br></b></p><p><b>顺时针</b>旋转红黑树的两个节点，使得父节点被自己的左孩子取代，而自己成为自己的右孩子。大家看下图：</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6024ce2b0c4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"746\" data-height=\"330\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;746&quot; height=&quot;330&quot;></svg>\"></p><p><br></p><p>图中，身为左孩子的Y取代了X的位置，而X变成了自己的右孩子。此为右旋转。</p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6024df0f4de?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60261624ffa?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p>我们以刚才插入节点21的情况为例：</p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60192dd75db?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"814\" data-height=\"580\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;814&quot; height=&quot;580&quot;></svg>\"></p><p><br></p><p><br></p><p>首先，我们需要做的是<b>变色</b>，把节点25及其下方的节点变色：</p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6027c291aee?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"829\" data-height=\"580\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;829&quot; height=&quot;580&quot;></svg>\"></p><p><br></p><p><br></p><p>此时节点17和节点25是连续的两个红色节点，那么把节点17变成黑色节点？恐怕不合适。这样一来不但打破了规则4，而且根据规则2（根节点是黑色），也不可能把节点13变成红色节点。</p><p><br></p><p>变色已无法解决问题，我们把节点13看做X，把节点17看做Y，像刚才的示意图那样进行<b>左旋转</b>：</p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b60230926ead?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"668\" data-height=\"336\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;668&quot; height=&quot;336&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6028ba39c59?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"814\" data-height=\"565\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;814&quot; height=&quot;565&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602854a3f9a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"860\" data-height=\"595\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;860&quot; height=&quot;595&quot;></svg>\"></p><p><br></p><p><br></p><p>由于根节点必须是黑色节点，所以需要<b>变色</b>，变色结果如下：</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602b60056ab?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"860\" data-height=\"595\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;860&quot; height=&quot;595&quot;></svg>\"></p><p><br></p><p><br></p><p>这样就结束了吗？并没有。因为其中两条路径(17 -&gt; 8 -&gt; 6 -&gt; NIL)的黑色节点个数是4，其他路径的黑色节点个数是3，不符合规则5。</p><p><br></p><p>这时候我们需要把节点13看做X，节点8看做Y，像刚才的示意图那样进行<b>右旋转</b>：</p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b6024ce2b0c4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"746\" data-height=\"330\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;746&quot; height=&quot;330&quot;></svg>\"></p><p><br></p><p><br></p><p></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602bcfa03b3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"860\" data-height=\"595\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;860&quot; height=&quot;595&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602b7308278?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"890\" data-height=\"496\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;890&quot; height=&quot;496&quot;></svg>\"></p><p><br></p><p><br></p><p>最后根据规则来进行<b>变色</b>：</p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602b45e1d3c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"890\" data-height=\"496\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;890&quot; height=&quot;496&quot;></svg>\"></p><p><br></p><p><br></p><p>如此一来，我们的红黑树变得重新符合规则。这一个例子的调整过程比较复杂，经历了如下步骤：</p><p><br></p><p>变色 -&gt; 左旋转 -&gt; 变色 -&gt; 右旋转 -&gt; 变色</p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602de430187?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602e1cd97cb?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602de85007c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/6/1602b602f65db8cb?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"650\" data-height=\"300\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;650&quot; height=&quot;300&quot;></svg>\"></p><p><br></p><p><br></p><p><b>几点说明：</b></p><p><br></p><p>1. 关于红黑树自平衡的调整，插入和删除节点的时候都涉及到很多种Case，由于篇幅原因无法展开来一一列举，有兴趣的朋友可以参考维基百科，里面讲的非常清晰。</p><p><br></p><p>2.漫画中红黑树调整过程的示例是一种比较复杂的情形，没太看明白的小伙伴也不必钻牛角尖，关键要懂得红黑树自平衡调整的主体思想。</p><p><br></p><p><br></p><p><br></p><p>—————END—————</p><p><br></p><p><br></p><p><br></p><p>喜欢本文的朋友们，欢迎长按下图关注订阅号<b>程序员小灰</b>，收看更多精彩内容</p><p><img class=\"lazyload inited\" data-src=\"https://user-gold-cdn.xitu.io/2017/12/1/160123dd91630187?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" data-width=\"430\" data-height=\"430\" src=\"data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;430&quot; height=&quot;430&quot;></svg>\"></p><br><p><br></p><style>.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></div> <div class=\"image-viewer-box\" data-v-78c9b824=\"\"><!----></div></div>"
  },
  {
    "category": "dataStruct",
    "qes": "红黑树深入剖析及Java实现",
    "ans": "<div class=\"Post-RichTextContainer\"><div class=\"RichText ztext Post-RichText\"><p>红黑树是平衡二叉查找树的一种。为了深入理解红黑树，我们需要从二叉查找树开始讲起。</p><h2>BST</h2><p>二叉查找树（Binary Search Tree，简称BST）是一棵二叉树，它的左子节点的值比父节点的值要小，右节点的值要比父节点的值大。它的高度决定了它的查找效率。</p><p>在理想的情况下，二叉查找树增删查改的时间复杂度为O(logN)（其中N为节点数），最坏的情况下为O(N)。当它的高度为logN+1时，我们就说二叉查找树是平衡的。<br></p><figure><noscript><img src=\"https://pic1.zhimg.com/v2-e64df5b2126506c59bad4604d298d818_b.png\" data-rawwidth=\"492\" data-rawheight=\"294\" class=\"origin_image zh-lightbox-thumb\" width=\"492\" data-original=\"https://pic1.zhimg.com/v2-e64df5b2126506c59bad4604d298d818_r.jpg\"/></noscript><img src=\"https://pic1.zhimg.com/80/v2-e64df5b2126506c59bad4604d298d818_720w.png\" data-rawwidth=\"492\" data-rawheight=\"294\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"492\" data-original=\"https://pic1.zhimg.com/v2-e64df5b2126506c59bad4604d298d818_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-e64df5b2126506c59bad4604d298d818_b.png\" data-lazy-status=\"ok\"></figure><br><p></p><h3>BST的查找操作</h3><div class=\"highlight\"><pre><code class=\"language-text\">T  key = a search key\nNode root = point to the root of a BST\n\nwhile(true){\n    if(root==null){\n        break;\n    }\n    if(root.value.equals(key)){\n        return root;\n    }\n    else if(key.compareTo(root.value)&lt;0){\n        root = root.left;\n    }\n    else{\n        root = root.right;\n    }\n}\nreturn null;\n</code></pre></div><p>从程序中可以看出，当BST查找的时候，先与当前节点进行比较：</p><ul><li>如果相等的话就返回当前节点；</li><li>如果少于当前节点则继续查找当前节点的左节点；</li><li>如果大于当前节点则继续查找当前节点的右节点。</li></ul><p>直到当前节点指针为空或者查找到对应的节点，程序查找结束。</p><h3>BST的插入操作</h3><div class=\"highlight\"><pre><code class=\"language-text\">Node node = create a new node with specify value\nNode root = point the root node of a BST\nNode parent = null;\n\n//find the parent node to append the new node\nwhile(true){\n   if(root==null)break;\n   parent = root;\n   if(node.value.compareTo(root.value)&lt;=0){\n      root = root.left;  \n   }else{\n      root = root.right;\n   } \n}\nif(parent!=null){\n   if(node.value.compareTo(parent.value)&lt;=0){//append to left\n      parent.left = node;\n   }else{//append to right\n      parent.right = node;\n   }\n}\n</code></pre></div><p>插入操作先通过循环查找到待插入的节点的父节点，和查找父节点的逻辑一样，都是比大小，小的往左，大的往右。找到父节点后，对比父节点，小的就插入到父节点的左节点，大就插入到父节点的右节点上。</p><h3>BST的删除操作</h3><p>删除操作的步骤如下：</p><ol><li>查找到要删除的节点。</li><li>如果待删除的节点是叶子节点，则直接删除。</li><li>如果待删除的节点不是叶子节点，则先找到待删除节点的中序遍历的后继节点，用该后继节点的值替换待删除的节点的值，然后删除后继节点。</li></ol><figure><noscript><img src=\"https://pic1.zhimg.com/v2-caf8927ad71613b1f93393931029b5a4_b.png\" data-rawwidth=\"840\" data-rawheight=\"399\" class=\"origin_image zh-lightbox-thumb\" width=\"840\" data-original=\"https://pic1.zhimg.com/v2-caf8927ad71613b1f93393931029b5a4_r.jpg\"/></noscript><img src=\"https://pic1.zhimg.com/80/v2-caf8927ad71613b1f93393931029b5a4_720w.png\" data-rawwidth=\"840\" data-rawheight=\"399\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"840\" data-original=\"https://pic1.zhimg.com/v2-caf8927ad71613b1f93393931029b5a4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-caf8927ad71613b1f93393931029b5a4_b.png\" data-lazy-status=\"ok\"></figure><h3>BST存在的问题</h3><p>BST存在的主要问题是，数在插入的时候会导致树倾斜，不同的插入顺序会导致树的高度不一样，而树的高度直接的影响了树的查找效率。理想的高度是logN，最坏的情况是所有的节点都在一条斜线上，这样的树的高度为N。</p><h2>RBTree</h2><p>基于BST存在的问题，一种新的树——平衡二叉查找树(Balanced BST)产生了。平衡树在插入和删除的时候，会通过旋转操作将高度保持在logN。其中两款具有代表性的平衡树分别为AVL树和红黑树。AVL树由于实现比较复杂，而且插入和删除性能差，在实际环境下的应用不如红黑树。</p><p>红黑树（Red-Black Tree，以下简称RBTree）的实际应用非常广泛，比如Linux内核中的完全公平调度器、高精度计时器、ext3文件系统等等，各种语言的函数库如Java的TreeMap和TreeSet，C++ STL的map、multimap、multiset等。</p><p>RBTree也是函数式语言中最常用的持久数据结构之一，在计算几何中也有重要作用。值得一提的是，Java 8中HashMap的实现也因为用RBTree取代链表，性能有所提升。</p><h3>RBTree的定义</h3><p>RBTree的定义如下:</p><ol><li>任何一个节点都有颜色，黑色或者红色</li><li>根节点是黑色的</li><li>父子节点之间不能出现两个连续的红节点</li><li>任何一个节点向下遍历到其子孙的叶子节点，所经过的黑节点个数必须相等</li><li>空节点被认为是黑色的</li></ol><p>数据结构表示如下：</p><div class=\"highlight\"><pre><code class=\"language-text\">class  Node&lt;T&gt;{\n   public  T value;\n   public   Node&lt;T&gt; parent;\n   public   boolean isRed;\n   public   Node&lt;T&gt; left;\n   public   Node&lt;T&gt; right;\n}\n</code></pre></div><p>RBTree在理论上还是一棵BST树，但是它在对BST的插入和删除操作时会维持树的平衡，即保证树的高度在[logN,logN+1]（理论上，极端的情况下可以出现RBTree的高度达到2*logN，但实际上很难遇到）。这样RBTree的查找时间复杂度始终保持在O(logN)从而接近于理想的BST。RBTree的删除和插入操作的时间复杂度也是O(logN)。RBTree的查找操作就是BST的查找操作。</p><h3>RBTree的旋转操作</h3><p>旋转操作(Rotate)的目的是使节点颜色符合定义，让RBTree的高度达到平衡。<br>Rotate分为left-rotate（左旋）和right-rotate（右旋），区分左旋和右旋的方法是：待旋转的节点从左边上升到父节点就是右旋，待旋转的节点从右边上升到父节点就是左旋。</p><figure><noscript><img src=\"https://pic2.zhimg.com/v2-b22d2a98bb0ab3b2dc08316577221e61_b.png\" data-rawwidth=\"1055\" data-rawheight=\"316\" class=\"origin_image zh-lightbox-thumb\" width=\"1055\" data-original=\"https://pic2.zhimg.com/v2-b22d2a98bb0ab3b2dc08316577221e61_r.jpg\"/></noscript><img src=\"https://pic2.zhimg.com/80/v2-b22d2a98bb0ab3b2dc08316577221e61_720w.png\" data-rawwidth=\"1055\" data-rawheight=\"316\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1055\" data-original=\"https://pic2.zhimg.com/v2-b22d2a98bb0ab3b2dc08316577221e61_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-b22d2a98bb0ab3b2dc08316577221e61_b.png\" data-lazy-status=\"ok\"></figure><br><h3>RBTree的查找操作</h3><p>RBTree的查找操作和BST的查找操作是一样的。请参考BST的查找操作代码。<br></p><h3>RBTree的插入操作</h3><p>RBTree的插入与BST的插入方式是一致的，只不过是在插入过后，可能会导致树的不平衡，这时就需要对树进行旋转操作和颜色修复（在这里简称插入修复），使得它符合RBTree的定义。</p><p>新插入的节点是红色的，插入修复操作如果遇到父节点的颜色为黑则修复操作结束。也就是说，只有在父节点为红色节点的时候是需要插入修复操作的。</p><p>插入修复操作分为以下的三种情况，而且新插入的节点的父节点都是红色的：</p><ol><li>叔叔节点也为红色。</li><li>叔叔节点为空，且祖父节点、父节点和新节点处于一条斜线上。</li><li>叔叔节点为空，且祖父节点、父节点和新节点不处于一条斜线上。</li></ol><h4>插入操作-case 1</h4><p>case 1的操作是将父节点和叔叔节点与祖父节点的颜色互换，这样就符合了RBTRee的定义。即维持了高度的平衡，修复后颜色也符合RBTree定义的第三条和第四条。下图中，操作完成后A节点变成了新的节点。如果A节点的父节点不是黑色的话，则继续做修复操作。<br></p><figure><noscript><img src=\"https://pic1.zhimg.com/v2-85d7be8e54ae9f904d86bf5f5ee3b4bc_b.png\" data-rawwidth=\"847\" data-rawheight=\"348\" class=\"origin_image zh-lightbox-thumb\" width=\"847\" data-original=\"https://pic1.zhimg.com/v2-85d7be8e54ae9f904d86bf5f5ee3b4bc_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='847' height='348'></svg>\" data-rawwidth=\"847\" data-rawheight=\"348\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"847\" data-original=\"https://pic1.zhimg.com/v2-85d7be8e54ae9f904d86bf5f5ee3b4bc_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-85d7be8e54ae9f904d86bf5f5ee3b4bc_b.png\"></figure><h4>插入操作-case 2</h4><p>case 2的操作是将B节点进行右旋操作，并且和父节点A互换颜色。通过该修复操作RBTRee的高度和颜色都符合红黑树的定义。如果B和C节点都是右节点的话，只要将操作变成左旋就可以了。<br></p><figure><noscript><img src=\"https://pic3.zhimg.com/v2-cd2171937e0ed68bca55214357e6669e_b.png\" data-rawwidth=\"453\" data-rawheight=\"218\" class=\"origin_image zh-lightbox-thumb\" width=\"453\" data-original=\"https://pic3.zhimg.com/v2-cd2171937e0ed68bca55214357e6669e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='453' height='218'></svg>\" data-rawwidth=\"453\" data-rawheight=\"218\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"453\" data-original=\"https://pic3.zhimg.com/v2-cd2171937e0ed68bca55214357e6669e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-cd2171937e0ed68bca55214357e6669e_b.png\"></figure><h4>插入操作-case 3</h4><p>case 3的操作是将C节点进行左旋，这样就从case 3转换成case 2了，然后针对case 2进行操作处理就行了。case 2操作做了一个右旋操作和颜色互换来达到目的。如果树的结构是下图的镜像结构，则只需要将对应的左旋变成右旋，右旋变成左旋即可。<br></p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-8594087429e54acbbc2aa6ae9da8cc5f_b.png\" data-rawwidth=\"546\" data-rawheight=\"247\" class=\"origin_image zh-lightbox-thumb\" width=\"546\" data-original=\"https://pic4.zhimg.com/v2-8594087429e54acbbc2aa6ae9da8cc5f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='546' height='247'></svg>\" data-rawwidth=\"546\" data-rawheight=\"247\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"546\" data-original=\"https://pic4.zhimg.com/v2-8594087429e54acbbc2aa6ae9da8cc5f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8594087429e54acbbc2aa6ae9da8cc5f_b.png\"></figure><h4>插入操作的总结</h4><p>插入后的修复操作是一个向root节点回溯的操作，一旦牵涉的节点都符合了红黑树的定义，修复操作结束。之所以会向上回溯是由于case 1操作会将父节点，叔叔节点和祖父节点进行换颜色，有可能会导致祖父节点不平衡(红黑树定义3)。这个时候需要对祖父节点为起点进行调节（向上回溯）。</p><p>祖父节点调节后如果还是遇到它的祖父颜色问题，操作就会继续向上回溯，直到root节点为止，根据定义root节点永远是黑色的。在向上的追溯的过程中，针对插入的3中情况进行调节。直到符合红黑树的定义为止。直到牵涉的节点都符合了红黑树的定义，修复操作结束。</p><p>如果上面的3中情况如果对应的操作是在右子树上，做对应的镜像操作就是了。</p><h3>RBTree的删除操作</h3><p>删除操作首先需要做的也是BST的删除操作，删除操作会删除对应的节点，如果是叶子节点就直接删除，如果是非叶子节点，会用对应的中序遍历的后继节点来顶替要删除节点的位置。删除后就需要做删除修复操作，使的树符合红黑树的定义，符合定义的红黑树高度是平衡的。</p><p>删除修复操作在遇到被删除的节点是红色节点或者到达root节点时，修复操作完毕。</p><p>删除修复操作是针对删除黑色节点才有的，当黑色节点被删除后会让整个树不符合RBTree的定义的第四条。需要做的处理是从兄弟节点上借调黑色的节点过来，如果兄弟节点没有黑节点可以借调的话，就只能往上追溯，将每一级的黑节点数减去一个，使得整棵树符合红黑树的定义。</p><p>删除操作的总体思想是从兄弟节点借调黑色节点使树保持局部的平衡，如果局部的平衡达到了，就看整体的树是否是平衡的，如果不平衡就接着向上追溯调整。</p><p>删除修复操作分为四种情况(删除黑节点后)：</p><ol><li>待删除的节点的兄弟节点是红色的节点。</li><li>待删除的节点的兄弟节点是黑色的节点，且兄弟节点的子节点都是黑色的。</li><li>待调整的节点的兄弟节点是黑色的节点，且兄弟节点的左子节点是红色的，右节点是黑色的(兄弟节点在右边)，如果兄弟节点在左边的话，就是兄弟节点的右子节点是红色的，左节点是黑色的。</li><li>待调整的节点的兄弟节点是黑色的节点，且右子节点是是红色的(兄弟节点在右边)，如果兄弟节点在左边，则就是对应的就是左节点是红色的。</li></ol><h4>删除操作-case 1</h4><p>由于兄弟节点是红色节点的时候，无法借调黑节点，所以需要将兄弟节点提升到父节点，由于兄弟节点是红色的，根据RBTree的定义，兄弟节点的子节点是黑色的，就可以从它的子节点借调了。</p><p>case 1这样转换之后就会变成后面的case 2，case 3，或者case 4进行处理了。上升操作需要对C做一个左旋操作，如果是镜像结构的树只需要做对应的右旋操作即可。</p><p>之所以要做case 1操作是因为兄弟节点是红色的，无法借到一个黑节点来填补删除的黑节点。</p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-46e732e84148b9bca53e995689e9ba9f_b.png\" data-rawwidth=\"536\" data-rawheight=\"239\" class=\"origin_image zh-lightbox-thumb\" width=\"536\" data-original=\"https://pic4.zhimg.com/v2-46e732e84148b9bca53e995689e9ba9f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='536' height='239'></svg>\" data-rawwidth=\"536\" data-rawheight=\"239\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"536\" data-original=\"https://pic4.zhimg.com/v2-46e732e84148b9bca53e995689e9ba9f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-46e732e84148b9bca53e995689e9ba9f_b.png\"></figure><h4>删除操作-case 2</h4><p>case 2的删除操作是由于兄弟节点可以消除一个黑色节点，因为兄弟节点和兄弟节点的子节点都是黑色的，所以可以将兄弟节点变红，这样就可以保证树的局部的颜色符合定义了。这个时候需要将父节点A变成新的节点，继续向上调整，直到整颗树的颜色符合RBTree的定义为止。</p><p>case 2这种情况下之所以要将兄弟节点变红，是因为如果把兄弟节点借调过来，会导致兄弟的结构不符合RBTree的定义，这样的情况下只能是将兄弟节点也变成红色来达到颜色的平衡。当将兄弟节点也变红之后，达到了局部的平衡了，但是对于祖父节点来说是不符合定义4的。这样就需要回溯到父节点，接着进行修复操作。<br></p><figure><noscript><img src=\"https://pic2.zhimg.com/v2-7975d1b235cd30c0bafb716b585ba45d_b.png\" data-rawwidth=\"546\" data-rawheight=\"246\" class=\"origin_image zh-lightbox-thumb\" width=\"546\" data-original=\"https://pic2.zhimg.com/v2-7975d1b235cd30c0bafb716b585ba45d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='546' height='246'></svg>\" data-rawwidth=\"546\" data-rawheight=\"246\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"546\" data-original=\"https://pic2.zhimg.com/v2-7975d1b235cd30c0bafb716b585ba45d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-7975d1b235cd30c0bafb716b585ba45d_b.png\"></figure><h4>删除操作-case 3</h4><p>case 3的删除操作是一个中间步骤，它的目的是将左边的红色节点借调过来，这样就可以转换成case 4状态了，在case 4状态下可以将D，E节点都阶段过来，通过将两个节点变成黑色来保证红黑树的整体平衡。</p><p>之所以说case-3是一个中间状态，是因为根据红黑树的定义来说，下图并不是平衡的，他是通过case 2操作完后向上回溯出现的状态。之所以会出现case 3和后面的case 4的情况，是因为可以通过借用侄子节点的红色，变成黑色来符合红黑树定义4.<br></p><figure><noscript><img src=\"https://pic3.zhimg.com/v2-04dbb22d25de3849d902582809198596_b.png\" data-rawwidth=\"577\" data-rawheight=\"318\" class=\"origin_image zh-lightbox-thumb\" width=\"577\" data-original=\"https://pic3.zhimg.com/v2-04dbb22d25de3849d902582809198596_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='577' height='318'></svg>\" data-rawwidth=\"577\" data-rawheight=\"318\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"577\" data-original=\"https://pic3.zhimg.com/v2-04dbb22d25de3849d902582809198596_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-04dbb22d25de3849d902582809198596_b.png\"></figure><h4>删除操作-case 4</h4><p>Case 4的操作是真正的节点借调操作，通过将兄弟节点以及兄弟节点的右节点借调过来，并将兄弟节点的右子节点变成红色来达到借调两个黑节点的目的，这样的话，整棵树还是符合RBTree的定义的。</p><p>Case 4这种情况的发生只有在待删除的节点的兄弟节点为黑，且子节点不全部为黑，才有可能借调到两个节点来做黑节点使用，从而保持整棵树都符合红黑树的定义。<br></p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-a559407bb4847a140642d16c6301d7db_b.png\" data-rawwidth=\"541\" data-rawheight=\"297\" class=\"origin_image zh-lightbox-thumb\" width=\"541\" data-original=\"https://pic4.zhimg.com/v2-a559407bb4847a140642d16c6301d7db_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='541' height='297'></svg>\" data-rawwidth=\"541\" data-rawheight=\"297\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"541\" data-original=\"https://pic4.zhimg.com/v2-a559407bb4847a140642d16c6301d7db_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-a559407bb4847a140642d16c6301d7db_b.png\"></figure><h4>删除操作的总结</h4><p>红黑树的删除操作是最复杂的操作，复杂的地方就在于当删除了黑色节点的时候，如何从兄弟节点去借调节点，以保证树的颜色符合定义。由于红色的兄弟节点是没法借调出黑节点的，这样只能通过选择操作让他上升到父节点，而由于它是红节点，所以它的子节点就是黑的，可以借调。</p><p>对于兄弟节点是黑色节点的可以分成3种情况来处理，当所以的兄弟节点的子节点都是黑色节点时，可以直接将兄弟节点变红，这样局部的红黑树颜色是符合定义的。但是整颗树不一定是符合红黑树定义的，需要往上追溯继续调整。</p><p>对于兄弟节点的子节点为左红右黑或者 (全部为红，右红左黑)这两种情况，可以先将前面的情况通过选择转换为后一种情况，在后一种情况下，因为兄弟节点为黑，兄弟节点的右节点为红，可以借调出两个节点出来做黑节点，这样就可以保证删除了黑节点，整棵树还是符合红黑树的定义的，因为黑色节点的个数没有改变。</p><p>红黑树的删除操作是遇到删除的节点为红色，或者追溯调整到了root节点，这时删除的修复操作完毕。</p><h3>RBTree的Java实现</h3><div class=\"highlight\"><pre><code class=\"language-text\">public class RBTreeNode&lt;T extends Comparable&lt;T&gt;&gt; {\n    private T value;//node value\n    private RBTreeNode&lt;T&gt; left;//left child pointer\n    private RBTreeNode&lt;T&gt; right;//right child pointer\n    private RBTreeNode&lt;T&gt; parent;//parent pointer\n    private boolean red;//color is red or not red\n\n    public RBTreeNode(){}\n    public RBTreeNode(T value){this.value=value;}\n    public RBTreeNode(T value,boolean isRed){this.value=value;this.red = isRed;}\n\n    public T getValue() {\n        return value;\n    }\n    void setValue(T value) {\n        this.value = value;\n    }\n    RBTreeNode&lt;T&gt; getLeft() {\n        return left;\n    }\n    void setLeft(RBTreeNode&lt;T&gt; left) {\n        this.left = left;\n    }\n    RBTreeNode&lt;T&gt; getRight() {\n        return right;\n    }\n    void setRight(RBTreeNode&lt;T&gt; right) {\n        this.right = right;\n    }\n    RBTreeNode&lt;T&gt; getParent() {\n        return parent;\n    }\n    void setParent(RBTreeNode&lt;T&gt; parent) {\n        this.parent = parent;\n    }\n    boolean isRed() {\n        return red;\n    }\n    boolean isBlack(){\n        return !red;\n    }\n    /**\n    * is leaf node\n    **/\n    boolean isLeaf(){\n        return left==null &amp;&amp; right==null;\n    }\n\n    void setRed(boolean red) {\n        this.red = red;\n    }\n\n    void makeRed(){\n        red=true;\n    }\n    void makeBlack(){\n        red=false;\n    }\n    @Override\n    public String toString(){\n        return value.toString();\n    }\n}\n\n\n\n\npublic class RBTree&lt;T extends Comparable&lt;T&gt;&gt; {\n    private final RBTreeNode&lt;T&gt; root;\n    //node number\n    private java.util.concurrent.atomic.AtomicLong size = \n                    new java.util.concurrent.atomic.AtomicLong(0);\n\n    //in overwrite mode,all node's value can not  has same    value\n    //in non-overwrite mode,node can have same value, suggest don't use non-overwrite mode.\n    private volatile boolean overrideMode=true;\n\n    public RBTree(){\n        this.root = new RBTreeNode&lt;T&gt;();\n    }\n\n    public RBTree(boolean overrideMode){\n        this();\n        this.overrideMode=overrideMode;\n    }\n\n\n    public boolean isOverrideMode() {\n        return overrideMode;\n    }\n\n    public void setOverrideMode(boolean overrideMode) {\n        this.overrideMode = overrideMode;\n    }\n\n    /**\n     * number of tree number\n     * @return\n     */\n    public long getSize() {\n        return size.get();\n    }\n    /**\n     * get the root node\n     * @return\n     */\n    private RBTreeNode&lt;T&gt; getRoot(){\n        return root.getLeft();\n    }\n\n    /**\n     * add value to a new node,if this value exist in this tree,\n     * if value exist,it will return the exist value.otherwise return null\n     * if override mode is true,if value exist in the tree,\n     * it will override the old value in the tree\n     * \n     * @param value\n     * @return\n     */\n    public T addNode(T value){\n        RBTreeNode&lt;T&gt; t = new RBTreeNode&lt;T&gt;(value);\n        return addNode(t);\n    }\n    /**\n     * find the value by give value(include key,key used for search,\n     * other field is not used,@see compare method).if this value not exist return null\n     * @param value\n     * @return\n     */\n    public T find(T value){\n        RBTreeNode&lt;T&gt; dataRoot = getRoot();\n        while(dataRoot!=null){\n            int cmp = dataRoot.getValue().compareTo(value);\n            if(cmp&lt;0){\n                dataRoot = dataRoot.getRight();\n            }else if(cmp&gt;0){\n                dataRoot = dataRoot.getLeft();\n            }else{\n                return dataRoot.getValue();\n            }\n        }\n        return null;\n    }\n    /**\n     * remove the node by give value,if this value not exists in tree return null\n     * @param value include search key\n     * @return the value contain in the removed node\n     */\n    public T remove(T value){\n        RBTreeNode&lt;T&gt; dataRoot = getRoot();\n        RBTreeNode&lt;T&gt; parent = root;\n\n        while(dataRoot!=null){\n            int cmp = dataRoot.getValue().compareTo(value);\n            if(cmp&lt;0){\n                parent = dataRoot;\n                dataRoot = dataRoot.getRight();\n            }else if(cmp&gt;0){\n                parent = dataRoot;\n                dataRoot = dataRoot.getLeft();\n            }else{\n                if(dataRoot.getRight()!=null){\n                    RBTreeNode&lt;T&gt; min = removeMin(dataRoot.getRight());\n                    //x used for fix color balance\n                    RBTreeNode&lt;T&gt; x = min.getRight()==null ? min.getParent() : min.getRight();\n                    boolean isParent = min.getRight()==null;\n\n                    min.setLeft(dataRoot.getLeft());\n                    setParent(dataRoot.getLeft(),min);\n                    if(parent.getLeft()==dataRoot){\n                        parent.setLeft(min);\n                    }else{\n                        parent.setRight(min);\n                    }\n                    setParent(min,parent);\n\n                    boolean curMinIsBlack = min.isBlack();\n                    //inherit dataRoot's color\n                    min.setRed(dataRoot.isRed());\n\n                    if(min!=dataRoot.getRight()){\n                        min.setRight(dataRoot.getRight());\n                        setParent(dataRoot.getRight(),min);\n                    }\n                    //remove a black node,need fix color\n                    if(curMinIsBlack){\n                        if(min!=dataRoot.getRight()){\n                            fixRemove(x,isParent);\n                        }else if(min.getRight()!=null){\n                            fixRemove(min.getRight(),false);\n                        }else{\n                            fixRemove(min,true);\n                        }\n                    }\n                }else{\n                    setParent(dataRoot.getLeft(),parent);\n                    if(parent.getLeft()==dataRoot){\n                        parent.setLeft(dataRoot.getLeft());\n                    }else{\n                        parent.setRight(dataRoot.getLeft());\n                    }\n                    //current node is black and tree is not empty\n                    if(dataRoot.isBlack() &amp;&amp; !(root.getLeft()==null)){\n                        RBTreeNode&lt;T&gt; x = dataRoot.getLeft()==null \n                                            ? parent :dataRoot.getLeft();\n                        boolean isParent = dataRoot.getLeft()==null;\n                        fixRemove(x,isParent);\n                    }\n                }\n                setParent(dataRoot,null);\n                dataRoot.setLeft(null);\n                dataRoot.setRight(null);\n                if(getRoot()!=null){\n                    getRoot().setRed(false);\n                    getRoot().setParent(null);\n                }\n                size.decrementAndGet();\n                return dataRoot.getValue();\n            }\n        }\n        return null;\n    }\n    /**\n     * fix remove action\n     * @param node\n     * @param isParent\n     */\n    private void fixRemove(RBTreeNode&lt;T&gt; node,boolean isParent){\n        RBTreeNode&lt;T&gt; cur = isParent ? null : node;\n        boolean isRed = isParent ? false : node.isRed();\n        RBTreeNode&lt;T&gt; parent = isParent ? node : node.getParent();\n\n        while(!isRed &amp;&amp; !isRoot(cur)){\n            RBTreeNode&lt;T&gt; sibling = getSibling(cur,parent);\n            //sibling is not null,due to before remove tree color is balance\n\n            //if cur is a left node\n            boolean isLeft = parent.getRight()==sibling;\n            if(sibling.isRed() &amp;&amp; !isLeft){//case 1\n                //cur in right\n                parent.makeRed();\n                sibling.makeBlack();\n                rotateRight(parent);\n            }else if(sibling.isRed() &amp;&amp; isLeft){\n                //cur in left\n                parent.makeRed();\n                sibling.makeBlack();\n                rotateLeft(parent);\n            }else if(isBlack(sibling.getLeft()) &amp;&amp; isBlack(sibling.getRight())){//case 2\n                sibling.makeRed();\n                cur = parent;\n                isRed = cur.isRed();\n                parent=parent.getParent();\n            }else if(isLeft &amp;&amp; !isBlack(sibling.getLeft()) \n                                    &amp;&amp; isBlack(sibling.getRight())){//case 3\n                sibling.makeRed();\n                sibling.getLeft().makeBlack();\n                rotateRight(sibling);\n            }else if(!isLeft &amp;&amp; !isBlack(sibling.getRight()) \n                                            &amp;&amp; isBlack(sibling.getLeft()) ){\n                sibling.makeRed();\n                sibling.getRight().makeBlack();\n                rotateLeft(sibling);\n            }else if(isLeft &amp;&amp; !isBlack(sibling.getRight())){//case 4\n                sibling.setRed(parent.isRed());\n                parent.makeBlack();\n                sibling.getRight().makeBlack();\n                rotateLeft(parent);\n                cur=getRoot();\n            }else if(!isLeft &amp;&amp; !isBlack(sibling.getLeft())){\n                sibling.setRed(parent.isRed());\n                parent.makeBlack();\n                sibling.getLeft().makeBlack();\n                rotateRight(parent);\n                cur=getRoot();\n            }\n        }\n        if(isRed){\n            cur.makeBlack();\n        }\n        if(getRoot()!=null){\n            getRoot().setRed(false);\n            getRoot().setParent(null);\n        }\n\n    }\n    //get sibling node\n    private RBTreeNode&lt;T&gt; getSibling(RBTreeNode&lt;T&gt; node,RBTreeNode&lt;T&gt; parent){\n        parent = node==null ? parent : node.getParent();\n        if(node==null){\n            return parent.getLeft()==null ? parent.getRight() : parent.getLeft();\n        }\n        if(node==parent.getLeft()){\n            return parent.getRight();\n        }else{\n            return parent.getLeft();\n        }\n    }\n\n    private boolean isBlack(RBTreeNode&lt;T&gt; node){\n        return node==null || node.isBlack();\n    }\n    private boolean isRoot(RBTreeNode&lt;T&gt; node){\n        return root.getLeft() == node &amp;&amp; node.getParent()==null;\n    }\n    /**\n     * find the successor node\n     * @param node current node's right node\n     * @return\n     */\n    private RBTreeNode&lt;T&gt; removeMin(RBTreeNode&lt;T&gt; node){\n        //find the min node\n        RBTreeNode&lt;T&gt; parent = node;\n        while(node!=null &amp;&amp; node.getLeft()!=null){\n            parent = node;\n            node = node.getLeft();\n        }\n        //remove min node\n        if(parent==node){\n            return node;\n        }\n\n        parent.setLeft(node.getRight());\n        setParent(node.getRight(),parent);\n\n        //don't remove right pointer,it is used for fixed color balance\n        //node.setRight(null);\n        return node;\n    }\n\n\n\n    private T addNode(RBTreeNode&lt;T&gt; node){\n        node.setLeft(null);\n        node.setRight(null);\n        node.setRed(true);\n        setParent(node,null);\n        if(root.getLeft()==null){\n            root.setLeft(node);\n            //root node is black\n            node.setRed(false);\n            size.incrementAndGet();\n        }else{\n            RBTreeNode&lt;T&gt; x = findParentNode(node);\n            int cmp = x.getValue().compareTo(node.getValue());\n\n            if(this.overrideMode &amp;&amp; cmp==0){\n                T v = x.getValue();\n                x.setValue(node.getValue());\n                return v;\n            }else if(cmp==0){\n                //value exists,ignore this node\n                return x.getValue();\n            }\n\n            setParent(node,x);\n\n            if(cmp&gt;0){\n                x.setLeft(node);\n            }else{\n                x.setRight(node);\n            }\n\n            fixInsert(node);\n            size.incrementAndGet();\n        }\n        return null;\n    }\n\n    /**\n     * find the parent node to hold node x,if parent value equals x.value return parent.\n     * @param x\n     * @return\n     */\n    private RBTreeNode&lt;T&gt; findParentNode(RBTreeNode&lt;T&gt; x){\n        RBTreeNode&lt;T&gt; dataRoot = getRoot();\n        RBTreeNode&lt;T&gt; child = dataRoot;\n\n        while(child!=null){\n            int cmp = child.getValue().compareTo(x.getValue());\n            if(cmp==0){\n                return child;\n            }\n            if(cmp&gt;0){\n                dataRoot = child;\n                child = child.getLeft();\n            }else if(cmp&lt;0){\n                dataRoot = child;\n                child = child.getRight();\n            }\n        }\n        return dataRoot;\n    }\n\n    /**\n     * red black tree insert fix.\n     * @param x\n     */\n    private void fixInsert(RBTreeNode&lt;T&gt; x){\n        RBTreeNode&lt;T&gt; parent = x.getParent();\n\n        while(parent!=null &amp;&amp; parent.isRed()){\n            RBTreeNode&lt;T&gt; uncle = getUncle(x);\n            if(uncle==null){//need to rotate\n                RBTreeNode&lt;T&gt; ancestor = parent.getParent();\n                //ancestor is not null due to before before add,tree color is balance\n                if(parent == ancestor.getLeft()){\n                    boolean isRight = x == parent.getRight();\n                    if(isRight){\n                        rotateLeft(parent);\n                    }\n                    rotateRight(ancestor);\n\n                    if(isRight){\n                        x.setRed(false);\n                        parent=null;//end loop\n                    }else{\n                        parent.setRed(false);\n                    }\n                    ancestor.setRed(true);\n                }else{\n                    boolean isLeft = x == parent.getLeft();\n                    if(isLeft){\n                        rotateRight(parent);\n                    }\n                    rotateLeft(ancestor);\n\n                    if(isLeft){\n                        x.setRed(false);\n                        parent=null;//end loop\n                    }else{\n                        parent.setRed(false);\n                    }\n                    ancestor.setRed(true);\n                }\n            }else{//uncle is red\n                parent.setRed(false);\n                uncle.setRed(false);\n                parent.getParent().setRed(true);\n                x=parent.getParent();\n                parent = x.getParent();\n            }\n        }\n        getRoot().makeBlack();\n        getRoot().setParent(null);\n    }\n    /**\n     * get uncle node\n     * @param node\n     * @return\n     */\n    private RBTreeNode&lt;T&gt; getUncle(RBTreeNode&lt;T&gt; node){\n        RBTreeNode&lt;T&gt; parent = node.getParent();\n        RBTreeNode&lt;T&gt; ancestor = parent.getParent();\n        if(ancestor==null){\n            return null;\n        }\n        if(parent == ancestor.getLeft()){\n            return ancestor.getRight();\n        }else{\n            return ancestor.getLeft();\n        }\n    }\n\n    private void rotateLeft(RBTreeNode&lt;T&gt; node){\n        RBTreeNode&lt;T&gt; right = node.getRight();\n        if(right==null){\n            throw new java.lang.IllegalStateException(\"right node is null\");\n        }\n        RBTreeNode&lt;T&gt; parent = node.getParent();\n        node.setRight(right.getLeft());\n        setParent(right.getLeft(),node);\n\n        right.setLeft(node);\n        setParent(node,right);\n\n        if(parent==null){//node pointer to root\n            //right  raise to root node\n            root.setLeft(right);\n            setParent(right,null);\n        }else{\n            if(parent.getLeft()==node){\n                parent.setLeft(right);\n            }else{\n                parent.setRight(right);\n            }\n            //right.setParent(parent);\n            setParent(right,parent);\n        }\n    }\n\n    private void rotateRight(RBTreeNode&lt;T&gt; node){\n        RBTreeNode&lt;T&gt; left = node.getLeft();\n        if(left==null){\n            throw new java.lang.IllegalStateException(\"left node is null\");\n        }\n        RBTreeNode&lt;T&gt; parent = node.getParent();\n        node.setLeft(left.getRight());\n        setParent(left.getRight(),node);\n\n        left.setRight(node);\n        setParent(node,left);\n\n        if(parent==null){\n            root.setLeft(left);\n            setParent(left,null);\n        }else{\n            if(parent.getLeft()==node){\n                parent.setLeft(left);\n            }else{\n                parent.setRight(left);\n            }\n            setParent(left,parent);\n        }\n    }\n\n\n    private void setParent(RBTreeNode&lt;T&gt; node,RBTreeNode&lt;T&gt; parent){\n        if(node!=null){\n            node.setParent(parent);\n            if(parent==root){\n                node.setParent(null);\n            }\n        }\n    }\n    /**\n     * debug method,it used print the given node and its children nodes,\n     * every layer output in one line\n     * @param root\n     */\n    public void printTree(RBTreeNode&lt;T&gt; root){\n        java.util.LinkedList&lt;RBTreeNode&lt;T&gt;&gt; queue =new java.util.LinkedList&lt;RBTreeNode&lt;T&gt;&gt;();\n        java.util.LinkedList&lt;RBTreeNode&lt;T&gt;&gt; queue2 =new java.util.LinkedList&lt;RBTreeNode&lt;T&gt;&gt;();\n        if(root==null){\n            return ;\n        }\n        queue.add(root);\n        boolean firstQueue = true;\n\n        while(!queue.isEmpty() || !queue2.isEmpty()){\n            java.util.LinkedList&lt;RBTreeNode&lt;T&gt;&gt; q = firstQueue ? queue : queue2;\n            RBTreeNode&lt;T&gt; n = q.poll();\n\n            if(n!=null){\n                String pos = n.getParent()==null ? \"\" : ( n == n.getParent().getLeft() \n                                                                        ? \" LE\" : \" RI\");\n                String pstr = n.getParent()==null ? \"\" : n.getParent().toString();\n                String cstr = n.isRed()?\"R\":\"B\";\n                cstr = n.getParent()==null ? cstr : cstr+\" \";\n                System.out.print(n+\"(\"+(cstr)+pstr+(pos)+\")\"+\"\\t\");\n                if(n.getLeft()!=null){\n                    (firstQueue ? queue2 : queue).add(n.getLeft());\n                }\n                if(n.getRight()!=null){\n                    (firstQueue ? queue2 : queue).add(n.getRight());\n                }\n            }else{\n                System.out.println();\n                firstQueue = !firstQueue;\n            }\n        }\n    }\n\n\n    public static void main(String[] args) {\n        RBTree&lt;String&gt; bst = new RBTree&lt;String&gt;();\n        bst.addNode(\"d\");\n        bst.addNode(\"d\");\n        bst.addNode(\"c\");\n        bst.addNode(\"c\");\n        bst.addNode(\"b\");\n        bst.addNode(\"f\");\n\n        bst.addNode(\"a\");\n        bst.addNode(\"e\");\n\n        bst.addNode(\"g\");\n        bst.addNode(\"h\");\n\n\n        bst.remove(\"c\");\n\n        bst.printTree(bst.getRoot());\n    }\n}\n</code></pre></div><p>代码调试的时候，printTree输出格式如下:<br>d(B)<br>b(B d LE) g(R d RI)<br>a(R b LE) e(B g LE) h(B g RI)<br>f(R e RI)</p><p>括号左边表示元素的内容。括号内的第一个元素表示颜色，B表示black，R表示red；第二个元素表示父元素的值；第三个元素表示左右，LE表示在父元素的左边。RI表示在父元素的右边。</p><p>第一个元素d是root节点，由于它没有父节点，所以括号内只有一个元素。</p><h2>总结</h2><p>作为平衡二叉查找树里面众多的实现之一，红黑树无疑是最简洁、实现最为简单的。红黑树通过引入颜色的概念，通过颜色这个约束条件的使用来保持树的高度平衡。作为平衡二叉查找树，旋转是一个必不可少的操作。通过旋转可以降低树的高度，在红黑树里面还可以转换颜色。</p><p>红黑树里面的插入和删除的操作比较难理解，这时要注意记住一点：操作之前红黑树是平衡的，颜色是符合定义的。在操作的时候就需要向兄弟节点、父节点、侄子节点借调和互换颜色，要达到这个目的，就需要不断的进行旋转。所以红黑树的插入删除操作需要不停的旋转，一旦借调了别的节点，删除和插入的节点就会达到局部的平衡（局部符合红黑树的定义），但是被借调的节点就不会平衡了，这时就需要以被借调的节点为起点继续进行调整，直到整棵树都是平衡的。在整个修复的过程中，插入具体的分为3种情况，删除分为4种情况。</p><p>整个红黑树的查找，插入和删除都是O(logN)的，原因就是整个红黑树的高度是logN，查找从根到叶，走过的路径是树的高度，删除和插入操作是从叶到根的，所以经过的路径都是logN。</p><h3>参考文献</h3><ol><li>Cormen T H, Leiserson C E, Rivest R L, 等. 算法导论（第3版）. 殷建平, 等. 机械工业出版社, 2012.</li><li>Sedgewick R, Wayne K. 算法（第4版）. 谢路云 译. 人民邮电出版社, 2012.</li><li>Weiss M A. 数据结构与算法分析（第2版）. 冯舜玺 译. 机械工业出版社, 2004.</li><li>Knuth D E. 计算机程序设计艺术 卷3：排序与查找（英文版 第2版）. 人民邮电出版社, 2010.</li></ol><br><p><strong>不想错过技术博客更新？想给文章评论、和作者互动？第一时间获取技术沙龙信息？</strong></p><p><strong>请关注我们的官方微信公众号“美团点评技术团队”。</strong></p></div></div>"
  },
  {
    "category": "dataStruct",
    "qes": "二叉树学习笔记之B树、B+树、B*树",
    "ans": "<div class=\"content-wrapper\" style=\"padding-bottom: 20px;\" data-spm-anchor-id=\"a2c6h.12873639.0.i3.4df0dfbaYmYW5h\">\n            <h1 class=\"article-title\" data-spm-anchor-id=\"a2c6h.12873639.0.i2.4df0dfbaYmYW5h\">二叉树学习笔记之B树、B+树、B*树</h1>\n            <p class=\"article-info\">\n                <a class=\"article-info-author question-avatar-wrapper wechat-disable\" href=\"/profile/fp4dnejvlwttk\">邴越</a>\n\n                <img src=\"https://img.alicdn.com/tfs/TB10fDzdND1gK0jSZFsXXbldVXa-36-32.png\" class=\"article-info-medal\" alt=\"\" data-url=\"https://ucc.alicdn.com/pic/ucc-admin/eee40c5017904f91b1ac40db688c0111.png\" data-time=\"2020-06-30 10:38:06\" data-btn-text=\"获取我的勋章 >\" data-btn-url=\"//developer.aliyun.com/certification\">\n\n                <span class=\"article-info-time\">2016-05-05</span>\n                <span class=\"article-info-read\">15883浏览量</span>\n                \n            </p>\n            \n            \n            <div class=\"article-desc\">\n                <b>简介：</b>\n                <span data-spm-anchor-id=\"a2c6h.12873639.0.i6.4df0dfbaYmYW5h\">动态查找树主要有二叉查找树（Binary Search Tree），平衡二叉查找树（Balanced Binary Search Tree）， 红黑树 (Red-Black Tree )，\n都是典型的二叉查找树结构，查找的时间复杂度 O(log2-N) 与树的深度相关，降低树的深度会提高查找效率，于是有了多路的B-tree/B+-tree/ B*-tree (B~Tree)。</span>\n            </div>\n\n            <div class=\"article-inner markdown-body\">\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;line-height:1.5;\" data-spm-anchor-id=\"a2c6h.12873639.0.i4.4df0dfbaYmYW5h\">动态查找树主要有二叉查找树（Binary Search Tree），平衡二叉查找树（Balanced Binary Search Tree）， 红黑树 (Red-Black Tree )，</span></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;line-height:1.5;\">都是典型的二叉查找树结构，查找的时间复杂度 O(log2-N) 与树的深度相关，</span><span style=\"margin:0px;padding:0px;line-height:1.5;\">降低树的深度会提高查找效率，于是有了多路的B-tree/B+-tree/ B*-tree (B~Tree)。</span></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">关于这B树以及B树的两种变体，其实很好区分，</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(0,0,128);font-size:16px;\"><span style=\"margin:0px;padding:0px;text-decoration:underline;\">相比B树，B+树不维护关键字具体信息，不考虑value的存储，所有的我们需要的信息都在叶子节点上，</span></span></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(0,0,128);font-size:16px;\"><span style=\"margin:0px;padding:0px;text-decoration:underline;\">B*树在B+树的基础上增加了非叶子节点兄弟间的指针，在某些场景效率更高，</span></span></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">主要掌握B树的操作，也就掌握了这两种变体树的操作。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\" data-spm-anchor-id=\"a2c6h.12873639.0.i5.4df0dfbaYmYW5h\"><br></p>\n<h2 style=\"margin:15px auto 2px;padding:0px;font-size:21px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(0,128,0);\">B树（B-tree），即B-树</span></h2>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">注意B树也就是B-树，B树的英文是B-tree，很多地方直译成了B-树，其实B-树和B树是同一种树。<br style=\"margin:0px;padding:0px;\">\nB树是为了磁盘或其它存储设备而设计的一种多叉平衡查找树。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(128,0,0);\"><strong style=\"margin:0px;padding:0px;\">（1）B-Tree的接点结构</strong></span><br style=\"margin:0px;padding:0px;\">\nB-tree中，每个结点包含：<br style=\"margin:0px;padding:0px;\">\n本结点所含关键字的个数；<br style=\"margin:0px;padding:0px;\">\n指向父结点的指针；<br style=\"margin:0px;padding:0px;\">\n关键字；<br style=\"margin:0px;padding:0px;\">\n指向子结点的指针数组；</p>\n<div class=\"cnblogs_Highlighter sh-gutter\" style=\"margin:0px;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">\n<div style=\"margin:0px;padding:0px;\">\n<div class=\"syntaxhighlighter cpp\" style=\"padding:0px;width:650.4px;margin:1em 0px;overflow:auto;font-size:1em;\">\n<table border=\"0\" style=\"border-collapse:collapse;border-spacing:0px;border:1px solid #C0C0C0;width:650.4px;margin:0px;padding:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:12px;background:none;\"><tbody style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:auto;background:none;\"><tr style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:auto;background:none;\">\n<td class=\"gutter\" style=\"padding:3px;border:1px solid #C0C0C0;border-collapse:collapse;margin:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;\">\n<div class=\"line number1 index0 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">1</div>\n<div class=\"line number2 index1 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">2</div>\n<div class=\"line number3 index2 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">3</div>\n<div class=\"line number4 index3 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">4</div>\n<div class=\"line number5 index4 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">5</div>\n<div class=\"line number6 index5 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">6</div>\n<div class=\"line number7 index6 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">7</div>\n<div class=\"line number8 index7 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">8</div>\n<div class=\"line number9 index8 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">9</div>\n<div class=\"line number10 index9 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">10</div>\n</td>\n<td class=\"code\" style=\"padding:3px;border:1px solid #C0C0C0;border-collapse:collapse;margin:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:auto;background:none;\">\n<div class=\"container\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:auto;background:none;\">\n<div class=\"line number1 index0 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\"><code class=\"cpp preprocessor\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:#808080;background:none;\">#define Max l000 //结点中关键字的最大数目：Max=m-1，m是B-树的阶</code></div>\n<div class=\"line number2 index1 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\"><code class=\"cpp preprocessor\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:#808080;background:none;\">#define Min 500 //非根结点中关键字的最小数目：Min=m/2-1</code></div>\n<div class=\"line number3 index2 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">typedef</code>&nbsp;<code class=\"cpp color1 bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-weight:bold;color:#808080;background:none;\">int</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">KeyType；&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//KeyType关键字类型由用户定义</code>\n</div>\n<div class=\"line number4 index3 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">typedef</code>&nbsp;<code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">struct</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">node{&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//结点定义中省略了指向关键字代表的记录的指针</code>\n</div>\n<div class=\"line number5 index4 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">　</code><code class=\"cpp color1 bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-weight:bold;color:#808080;background:none;\">int</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">keynum；&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//结点中当前拥有的关键字的个数，keynum&lt;&lt;Max</code>\n</div>\n<div class=\"line number6 index5 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">　KeyType key[Max+1]；&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//关键字向量为key[1..keynum]，key[0]不用。</code>\n</div>\n<div class=\"line number7 index6 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">　</code><code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">struct</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">node *parent；&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//指向双亲结点</code>\n</div>\n<div class=\"line number8 index7 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">　</code><code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">struct</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">node *son[Max+1]；</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//指向孩子结点的指针数组，孩子指针向量为son[0..keynum]</code>\n</div>\n<div class=\"line number9 index8 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">}BTreeNode；</code>\n</div>\n<div class=\"line number10 index9 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">typedef</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">BTreeNode *BTree；</code>\n</div>\n</div>\n</td>\n</tr></tbody></table>\n</div>\n</div>\n</div>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(128,0,0);\"><strong style=\"margin:0px;padding:0px;\">（2）B-tree的特点</strong></span></p>\n<ul style=\"margin:0px 0px 0px 30px;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">\n<li style=\"margin:0px;padding:0px;list-style:disc;\">B-tree是一种多路搜索树（并不是二叉的），对于一棵M阶树：</li>\n<li style=\"margin:0px;padding:0px;list-style:disc;\">定义任意非叶子结点最多只有M个孩子；且M&gt;2；</li>\n<li style=\"margin:0px;padding:0px;list-style:disc;\">根结点的孩子数为[2, M]，除非根结点为叶子节点；</li>\n<li style=\"margin:0px;padding:0px;list-style:disc;\">除根结点以外的非叶子结点的儿子数为[M/2, M]；</li>\n<li style=\"margin:0px;padding:0px;list-style:disc;\">非叶子结点的关键字个数=指向儿子的指针个数-1；</li>\n<li style=\"margin:0px;padding:0px;list-style:disc;\">每个非叶子结点存放至少M/2-1（取上整）和至多M-1个关键字；</li>\n<li style=\"margin:0px;padding:0px;list-style:disc;\">非叶子结点的关键字：K[1], K[2], …, K[M-1]；且K[i] &lt; K[i+1]；</li>\n<li style=\"margin:0px;padding:0px;list-style:disc;\">非叶子结点的指针：P[1], P[2], …, P[M]；其中P[1]指向关键字小于K[1]的子树，P[M]指向关键字大于K[M-1]的子树，其它P[i]指向关键字属于(K[i-1], K[i])的子树；</li>\n<li style=\"margin:0px;padding:0px;list-style:disc;\">所有叶子结点位于同一层；</li>\n</ul>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span class=\"Apple-tab-span\" style=\"margin:0px;padding:0px;color:rgb(255,0,0);\">以M=3的一棵3阶B树为例：</span></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span class=\"Apple-tab-span\" style=\"margin:0px;padding:0px;\"><img src=\"http://images2015.cnblogs.com/blog/524341/201604/524341-20160414100804004-506796201.jpg\" alt=\"\" style=\"margin:0px;padding:0px;border:0px;\"></span></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(255,0,0);\">一棵包含了24个英文字母的5阶B树的结构：</span></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><img src=\"http://images2015.cnblogs.com/blog/524341/201604/524341-20160414103943332-953756683.png\" alt=\"\" width=\"894\" height=\"406\" style=\"margin:0px;padding:0px;border:0px;\"></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(128,0,0);\"><strong style=\"margin:0px;padding:0px;\">（3）B-tree高度与复杂度</strong></span></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">B树的高度是<img src=\"http://images2015.cnblogs.com/blog/524341/201604/524341-20160414100900863-348486693.gif\" alt=\"\" style=\"margin:0px;padding:0px;border:0px;\">，而不<span style=\"margin:0px;padding:0px;color:rgb(255,0,0);\"><strong style=\"margin:0px;padding:0px;\">是其它几种树的H=log2n，</strong></span>其中T为度数（每个节点包含的元素个数），即所谓的阶数，n为总元素个数或总关键字数。<br style=\"margin:0px;padding:0px;\"><br style=\"margin:0px;padding:0px;\">\nB树查找的时间复杂度为O(Log2-N)，下面是参考推导过程：</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><img src=\"http://images2015.cnblogs.com/blog/524341/201604/524341-20160414100908801-978256041.gif\" alt=\"\" style=\"margin:0px;padding:0px;border:0px;\"><br style=\"margin:0px;padding:0px;\"><br style=\"margin:0px;padding:0px;\">\n其中M为设定的非叶子结点最多子树个数，N为关键字总数；所以B-树的性能总是等价于二分查找（与M值无关），也就没有AVL树平衡的问题。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">&nbsp;</p>\n<h2 style=\"margin:15px auto 2px;padding:0px;font-size:21px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(0,128,0);\"><strong style=\"margin:0px;padding:0px;\"><strong style=\"margin:0px;padding:0px;\"><br></strong></strong></span></h2>\n<h2 style=\"margin:15px auto 2px;padding:0px;font-size:21px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(0,128,0);\"><strong style=\"margin:0px;padding:0px;\"><strong style=\"margin:0px;padding:0px;\">B-tree的基本操作</strong></strong></span></h2>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><strong style=\"margin:0px;padding:0px;\">（1）查找操作</strong></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">在B-树中查找给定关键字的方法类似于二叉排序树上的查找。不同的是在每个结点上确定向下查找的路径不一定是二路而是keynum+1路的。<br style=\"margin:0px;padding:0px;\">\n对结点内的存放有序关键字序列的向量key[l..keynum] 用顺序查找或折半查找方法查找。若在某结点内找到待查的关键字K，则返回该结点的地址及K在key[1..keynum]中的位置；否则，确定K在某个key[i]和key[i+1]之间结点后，从磁盘中读son[i]所指的结点继续查找。直到在某结点中查找成功；或直至找到叶结点且叶结点中的查找仍不成功时，查找过程失败。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">&nbsp;</p>\n<div class=\"cnblogs_Highlighter sh-gutter\" style=\"margin:0px;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">\n<div style=\"margin:0px;padding:0px;\">\n<div class=\"syntaxhighlighter cpp\" style=\"padding:0px;width:650.4px;margin:1em 0px;overflow:auto;font-size:1em;\">\n<table border=\"0\" style=\"border-collapse:collapse;border-spacing:0px;border:1px solid #C0C0C0;width:650.4px;margin:0px;padding:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:12px;background:none;\"><tbody style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:auto;background:none;\"><tr style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:auto;background:none;\">\n<td class=\"gutter\" style=\"padding:3px;border:1px solid #C0C0C0;border-collapse:collapse;margin:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;\">\n<div class=\"line number1 index0 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">1</div>\n<div class=\"line number2 index1 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">2</div>\n<div class=\"line number3 index2 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">3</div>\n<div class=\"line number4 index3 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">4</div>\n<div class=\"line number5 index4 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">5</div>\n<div class=\"line number6 index5 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">6</div>\n<div class=\"line number7 index6 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">7</div>\n<div class=\"line number8 index7 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">8</div>\n<div class=\"line number9 index8 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">9</div>\n<div class=\"line number10 index9 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">10</div>\n<div class=\"line number11 index10 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">11</div>\n<div class=\"line number12 index11 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">12</div>\n<div class=\"line number13 index12 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">13</div>\n<div class=\"line number14 index13 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">14</div>\n<div class=\"line number15 index14 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">15</div>\n<div class=\"line number16 index15 alt1\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">16</div>\n<div class=\"line number17 index16 alt2\" style=\"margin:0px;padding:0px .5em;border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);float:none;height:auto;line-height:1.8em;overflow:visible;text-align:right;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">17</div>\n</td>\n<td class=\"code\" style=\"padding:3px;border:1px solid #C0C0C0;border-collapse:collapse;margin:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:auto;background:none;\">\n<div class=\"container\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.1em;overflow:visible;vertical-align:baseline;width:auto;background:none;\">\n<div class=\"line number1 index0 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">BTreeNode *SearchBTree(BTree T，KeyType K，</code><code class=\"cpp color1 bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-weight:bold;color:#808080;background:none;\">int</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">*pos)</code>\n</div>\n<div class=\"line number2 index1 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">{&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//在B-树T中查找关键字K，成功时返回找到的结点的地址及K在其中的位置*pos</code>\n</div>\n<div class=\"line number3 index2 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\"><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//失败则返回NULL，且*pos无定义</code></div>\n<div class=\"line number4 index3 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp color1 bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-weight:bold;color:#808080;background:none;\">int</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">i；</code>\n</div>\n<div class=\"line number5 index4 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">T→key[0]=k;&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//设哨兵．下面用顺序查找key[1..keynum]</code>\n</div>\n<div class=\"line number6 index5 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">for</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">(i=T-&gt;keynum；K&lt;t-&gt;key[i];i--)；&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//从后向前找第1个小于等于K的关键字</code>\n</div>\n<div class=\"line number7 index6 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">if</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">(i&gt;0 &amp;&amp; T-&gt;key[i]==1){&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//查找成功，返回T及i</code>\n</div>\n<div class=\"line number8 index7 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">*pos=i；</code>\n</div>\n<div class=\"line number9 index8 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">return</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">T；</code>\n</div>\n<div class=\"line number10 index9 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">}&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//结点内查找失败，但T-&gt;key[i]&lt;K&lt;T-&gt;key[i+1]，下一个查找的结点应为</code>\n</div>\n<div class=\"line number11 index10 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//son[i]</code>\n</div>\n<div class=\"line number12 index11 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">if</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">(!T-&gt;son[i])&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//*T为叶子，在叶子中仍未找到K，则整个查找过程失败</code>\n</div>\n<div class=\"line number13 index12 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">return</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">NULL；</code>\n</div>\n<div class=\"line number14 index13 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//查找插入关键字的位置，则应令*pos=i，并返回T，见后面的插入操作</code>\n</div>\n<div class=\"line number15 index14 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">DiskRead(T-&gt;son[i])；&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//在磁盘上读人下一查找的树结点到内存中</code>\n</div>\n<div class=\"line number16 index15 alt1\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background-image:none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;&nbsp;</code><code class=\"cpp keyword bold\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,0,255);background:none;\">return</code>&nbsp;<code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">SearchBTree(T-&gt;Son[i]，k，pos)；&nbsp;</code><code class=\"cpp comments\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;\">//递归地继续查找于树T-&gt;son[i]</code>\n</div>\n<div class=\"line number17 index16 alt2\" style=\"margin:0px;padding:0px 1em;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;white-space:nowrap;background:rgb(244,244,244) none;\">\n<code class=\"cpp spaces\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">&nbsp;</code><code class=\"cpp plain\" style=\"margin:0px;padding:0px;border:0px;float:none;height:auto;line-height:1.8em;overflow:visible;vertical-align:baseline;width:auto;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;\">}</code>\n</div>\n</div>\n</td>\n</tr></tbody></table>\n</div>\n</div>\n</div>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">　　</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><strong style=\"margin:0px;padding:0px;\">（2）查找操作的时间开销</strong><br style=\"margin:0px;padding:0px;\">\nB-树上的查找有两个基本步骤：<br style=\"margin:0px;padding:0px;\">\n1.在B-树中查找结点，该查找涉及读盘DiskRead操作，属外查找；<br style=\"margin:0px;padding:0px;\">\n2.在结点内查找，该查找属内查找。<br style=\"margin:0px;padding:0px;\">\n查找操作的时间为：<br style=\"margin:0px;padding:0px;\">\n1.外查找的读盘次数不超过树高h，故其时间是O(h)；<br style=\"margin:0px;padding:0px;\">\n2.内查找中，每个结点内的关键字数目keynum&lt;m(m是B-树的阶数)，故其时间为O(nh)。<br style=\"margin:0px;padding:0px;\">\n注意：<br style=\"margin:0px;padding:0px;\">\n1.实际上外查找时间可能远远大于内查找时间。<br style=\"margin:0px;padding:0px;\">\n2.B-树作为数据库文件时，打开文件之后就必须将根结点读人内存，而直至文件关闭之前，此根一直驻留在内存中，故查找时可以不计读入根结点的时间。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><strong style=\"margin:0px;padding:0px;\">（3）插入操作</strong></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">&nbsp;插入一个元素时，首先在B树中是否存在，如果不存在，即在叶子结点处结束，然后在叶子结点中插入该新的元素，注意：如果叶子结点空间足够，这里需要向右移动该叶子结点中大于新插入关键字的元素，如果空间满了以致没有足够的空间去添加新的元素，则将该结点进行“分裂”，将一半数量的关键字元素分裂到新的其相邻右结点中，中间关键字元素上移到父结点中（当然，如果父结点空间满了，也同样需要“分裂”操作），而且当结点中关键元素向右移动了，相关的指针也需要向右移。如果在根结点插入新元素，空间满了，则进行分裂操作，这样原来的根结点中的中间关键字元素向上移动到新的根结点中，因此导致树的高度增加一层。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><strong style=\"margin:0px;padding:0px;\">（4）删除操作</strong></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">首先查找B树中需删除的元素,如果该元素在B树中存在，则将该元素在其结点中进行删除，如果删除该元素后，首先判断该元素是否有左右孩子结点，如果有，则上移孩子结点中的某相近元素到父节点中，然后是移动之后的情况；如果没有，直接删除后，移动之后的情况。</p>\n<h2 style=\"margin:15px auto 2px;padding:0px;font-size:21px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;text-decoration:underline;\"><span style=\"margin:0px;padding:0px;color:rgb(0,128,0);\">B+树（B+-tree）</span></span></h2>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">B+-tree是应文件系统所需而产生的一种B-tree的变形树。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;color:rgb(128,0,0);\"><strong style=\"margin:0px;padding:0px;\">（1）B树和B+树的对比</strong></span><br style=\"margin:0px;padding:0px;\">\n一棵m阶的B+树和m阶的B树的异同点在于：<br style=\"margin:0px;padding:0px;\">\n1.有n棵子树的结点中含有n-1 个关键字；<br style=\"margin:0px;padding:0px;\">\n2.所有的叶子结点中包含了全部关键字的信息，及指向含有这些关键字记录的指针，且叶子结点本身依关键字的大小自小而大的顺序链接。 (而B 树的叶子节点并没有包括全部需要查找的信息)<br style=\"margin:0px;padding:0px;\">\n3.所有的非终端结点可以看成是索引部分，结点中仅含有其子树根结点中最大（或最小）关键字。 (而B 树的非终节点也包含需要查找的有效信息)<br style=\"margin:0px;padding:0px;\"><strong style=\"margin:0px;padding:0px;\">（2）为什么说B+-tree比B 树更适合实际应用中操作系统的文件索引和数据库索引？</strong></p>\n<ul style=\"margin:0px 0px 0px 30px;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><li style=\"margin:0px;padding:0px;list-style:disc;\">&nbsp;B+-tree的磁盘读写代价更低</li></ul>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">B+-tree的内部结点并没有指向关键字具体信息的指针。因此其内部结点相对B 树更小。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">一次性读入内存中的需要查找的关键字也就越多。相对来说IO读写次数也就降低了。<br style=\"margin:0px;padding:0px;\">\n举个例子，假设磁盘中的一个盘块容纳16bytes，而一个关键字2bytes，一个关键字具体信息指针2bytes。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\" data-spm-anchor-id=\"a2c6h.12873639.0.i1.4df0dfbaYmYW5h\">一棵9阶B-tree(一个结点最多8个关键字)的内部结点需要2个盘快。而B+ 树内部结点只需要1个盘快。当需要把内部结点读入内存中的时候，B 树就比B+ 树多一次盘块查找时间(在磁盘中就是盘片旋转的时间)。</p>\n<ul style=\"margin:0px 0px 0px 30px;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><li style=\"margin:0px;padding:0px;list-style:disc;\">B+-tree的查询效率更加稳定</li></ul>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">由于非终结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。</p>\n<h2 style=\"margin:15px auto 2px;padding:0px;font-size:21px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;text-decoration:underline;\"><span style=\"margin:0px;padding:0px;color:rgb(0,128,0);\"><br></span></span></h2>\n<h2 style=\"margin:15px auto 2px;padding:0px;font-size:21px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);\"><span style=\"margin:0px;padding:0px;text-decoration:underline;\"><span style=\"margin:0px;padding:0px;color:rgb(0,128,0);\">B*树（B*-tree）</span></span></h2>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">B*-tree是B+-tree的变体，在B+树的基础上(所有的叶子结点中包含了全部关键字的信息，及指向含有这些关键字记录的指针)，</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">B*树中非根和非叶子结点再增加指向兄弟的指针；</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">B*树定义了非叶子结点关键字个数至少为(2/3)*M，即块的最低使用率为2/3（代替B+树的1/2）。</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">下图是一棵典型的B*树：</p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\"><img src=\"http://images2015.cnblogs.com/blog/524341/201604/524341-20160414101039660-287121250.jpg\" alt=\"\" style=\"margin:0px;padding:0px;border:0px;\"></p>\n<p style=\"margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.92px;line-height:20.88px;background-color:rgb(255,255,255);\">&nbsp;</p>\n<div><br></div>\n</div>\n            \n            <div>\n                \n            </div>\n\n            \n\n            \n\n            <div class=\"article-share float-right\">\n                <span>分享：</span>\n                <span href=\"javascript:;\" class=\"ico-wechat ico-weixin\">\n                        <div class=\"qrcode-float\">\n                            <img alt=\"\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAIAAAC1nk4lAAABsElEQVR42u2ZSw7DIAxEuf+l210Vgf08UBu1krOIUJSSsRn/puP1h9do0A26QTfoBt2gG7QEeljX5/nznefL0/rz2nPh7ZwD2nxiGuAZZiLzdk4DPUGBO1tu/mrauRD0RIyVSytcky23QQMrVjN23VHI6RWW58vVhlpOe9nj+3tV9hCNMV1urnWPfgva9DEnb3MHiNdkT+uB73FApH6mp80sy6QE1orlMzMQQ3u8helg4H0OPcxznD4TxiVU+NpADM1QQtPkfRWnmZ1MBs/gXejjwMchU6HlOA6+8+ISdhq7LXht9uDQZD5AFTwrjeMgdXhpG8qNtyhPedxwiqfBsZHvaeg3vBDkczjo77YDUQwphWM3OB06Sc8DMNiWTOPhmMghKJInHzSnCJ5xuIYnczpsjkGaAYHhmBvbnA7hQlKHGayk99DPQRwdrnI6bPFYteH8c0M1hZbSowR3iMmcBq+wthSqeIX9NDzxkOlKUknDJKoFIknO6mgmaF2ADHNOVXEJZ7tQggpVshucZpUj7I1CQaIke4TKgTgj3lNNf/rfrQbdoBt0g27QDbpB/+j1Bmb4uBhFZYfWAAAAAElFTkSuQmCCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==\">\n                        </div>\n                    </span>\n                <a class=\"ico-weibo\" target=\"_blank\" href=\"http://service.weibo.com/share/share.php?title=%E4%BA%8C%E5%8F%89%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BB%E6%A0%91%E3%80%81B%2B%E6%A0%91%E3%80%81B*%E6%A0%91%E5%8A%A8%E6%80%81%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%BB%E8%A6%81%E6%9C%89%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%EF%BC%88Binary+Search+Tree%EF%BC%89%EF%BC%8C%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%EF%BC%88Balanced+Binary+Search+Tree%EF%BC%89%EF%BC%8C+%E7%BA%A2%E9%BB%91%E6%A0%91+%28Red-Black+Tree+%29%EF%BC%8C%0D%0A%E9%83%BD%E6%98%AF%E5%85%B8%E5%9E%8B%E7%9A%84%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BB%93%E6%9E%84%EF%BC%8C%E6%9F%A5%E6%89%BE%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6+O%28log2-N%29+%E4%B8%8E%E6%A0%91%E7%9A%84%E6%B7%B1%E5%BA%A6%E7%9B%B8%E5%85%B3%EF%BC%8C%E9%99%8D%E4%BD%8E%E6%A0%91%E7%9A%84%E6%B7%B1%E5%BA%A6%E4%BC%9A%E6%8F%90%E9%AB%98%E6%9F%A5%E6%89%BE%E6%95%88%E7%8E%87%EF%BC%8C%E4%BA%8E%E6%98%AF%E6%9C%89%E4%BA%86%E5%A4%9A%E8%B7%AF%E7%9A%84B-tree%2FB%2B-tree%2F+B*-tree+%28B%7ETree%29%E3%80%82&amp;url=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F38345\"></a>\n            </div>\n\n        <div class=\"article-publicity\"> <div class=\"publicity-share\">\n            <div class=\"publicity-title\">推荐关注：</div>\n          </div><div class=\"publicity-article-wrapper\"><a data-spm-click=\"gostr=/developer.publicity.space;locaid=d102020001;psid=query:1&amp;ext=\" class=\"article-slide\" href=\"https://developer.aliyun.com/plan/promotion/1?utm_content=g_1000198932\" key=\"0\" target=\"_blank\"> · 手慢无！云服务器免费领取，实时计算净省3258元</a><a data-spm-click=\"gostr=/developer.publicity.space;locaid=d102020002;psid=query:9&amp;ext=\" class=\"article-slide\" href=\"https://workbench.aliyun.com/activities/coupon?utm_content=g_1000204987\" key=\"1\" target=\"_blank\"> · 有奖体验！3分钟完成任务，立领10元无门槛代金券!</a><a data-spm-click=\"gostr=/developer.publicity.space;locaid=d102020003;psid=query:3&amp;ext=\" class=\"article-slide\" href=\"https://developer.aliyun.com/topic/opensourceday?utm_content=g_1000196451\" key=\"2\" target=\"_blank\"> · 每周二看直播，学最新阿里开源技术</a><a data-spm-click=\"gostr=/developer.publicity.space;locaid=d102020004;psid=query:4&amp;ext=\" class=\"article-slide\" href=\"https://developer.aliyun.com/learning/roadmap/cloudnative2020\" key=\"3\" target=\"_blank\"> · 10万人在学的云原生技术公开课，免费领取你的知识好礼</a></div></div><div class=\"article-copyright\">\n                <p class=\"article-copyright-info\">\n                    <b>版权声明：</b><span>本文内容由阿里云实名注册用户自发贡献，版权归原作者所有，阿里云开发者社区不拥有其著作权，亦不承担相应法律责任。具体规则请查看《<a style=\"color:#ff6a00\" href=\"https://developer.aliyun.com/article/768092\">阿里云开发者社区用户服务协议</a>》和《<a style=\"color:#ff6a00\" href=\"https://developer.aliyun.com/article/768093\">阿里云开发者社区知识产权保护指引</a>》。如果您发现本社区中有涉嫌抄袭的内容，填写<a style=\"color:#ff6a00\" href=\"https://yida.alibaba-inc.com/o/right\">侵权投诉表单</a>进行举报，一经查实，本社区将立刻删除涉嫌侵权内容。</span></p>\n            </div><div class=\"article-tags\">\n                    <span class=\"tag-item\"><span>索引</span></span>\n                </div></div>"
  },
  {
    "category": "dataStruct",
    "qes": "[HBase] LSM树 VS B+树",
    "ans": "<div id=\"article_content\" class=\"article_content clearfix\">\n        <link rel=\"stylesheet\" href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-b5506197d8.css\">\n                <div id=\"content_views\" class=\"htmledit_views\">\n                    <p>LSM树是HBase里非常有创意的一种数据结构，它和传统的B+树不太一样，下面先说说B+树。</p> \n<h3><a name=\"t0\"></a><a name=\"t0\"></a>1 B+树</h3> \n<p>相信大家对B+树已经非常的熟悉，比如Oracle的普通索引就是采用B+树的方式，下面是一个B+树的例子：</p> \n<p><img src=\"https://img-blog.csdn.net/20130508094533796\" alt=\"\"><br> </p> \n<p><img src=\"\" alt=\"\"><br> </p> \n<p>根节点和枝节点很简单，分别记录每个叶子节点的最小值，并用一个指针指向叶子节点。</p> \n<p>叶子节点里每个键值都指向真正的数据块（如Oracle里的RowID），每个叶子节点都有前指针和后指针，这是为了做范围查询时，叶子节点间可以直接跳转，从而避免再去回溯至枝和跟节点。</p> \n<p><strong>B+树最大的性能问题是会产生大量的随机IO</strong>，随着新数据的插入，叶子节点会慢慢分裂，逻辑上连续的叶子节点在物理上往往不连续，甚至分离的很远，但做范围查询时，会产生大量读随机IO。</p> \n<p>对于大量的随机写也一样，举一个插入key跨度很大的例子，如7-&gt;1000-&gt;3-&gt;2000 ... 新插入的数据存储在磁盘上相隔很远，会产生大量的随机写IO.</p> \n<p>从上面可以看出，低下的磁盘寻道速度严重影响性能（近些年来，磁盘寻道速度的发展几乎处于停滞的状态）。</p> \n<h3><a name=\"t1\"></a><a name=\"t1\"></a>2 LSM树</h3> \n<p>为了克服B+树的弱点，HBase引入了LSM树的概念，即Log-Structured Merge-Trees。</p> \n<p>为了更好的说明LSM树的原理，下面举个比较极端的例子：</p> \n<p>现在假设有1000个节点的随机key，对于磁盘来说，肯定是把这1000个节点顺序写入磁盘最快，但是这样一来，读就悲剧了，因为key在磁盘中完全无序，每次读取都要全扫描；</p> \n<p>那么，为了让读性能尽量高，数据在磁盘中必须得有序，这就是B+树的原理，但是写就悲剧了，因为会产生大量的随机IO，磁盘寻道速度跟不上。</p> \n<p>LSM树本质上就是在读写之间取得平衡，和B+树相比，<strong>它牺牲了部分读性能，用来大幅提高写性能</strong>。</p> \n<p>它的原理是把一颗大树拆分成N棵小树， 它首先写入到内存中（内存没有寻道速度的问题，随机写的性能得到大幅提升），在内存中构建一颗有序小树，随着小树越来越大，内存的小树会flush到磁盘上。当读时，由于不知道数据在哪棵小树上，因此必须遍历所有的小树，但在每颗小树内部数据是有序的。</p> \n<p><img src=\"https://img-blog.csdn.net/20130508094524405\" alt=\"\"><br> </p> \n<p><img src=\"\" alt=\"\"><br> </p> \n<p>以上就是LSM树最本质的原理，有了原理，再看具体的技术就很简单了。</p> \n<p>1）首先说说为什么要有WAL（Write Ahead Log），很简单，因为数据是先写到内存中，如果断电，内存中的数据会丢失，因此为了保护内存中的数据，需要在磁盘上先记录logfile，当内存中的数据flush到磁盘上时，就可以抛弃相应的Logfile。</p> \n<p>2）什么是memstore, storefile？很简单，上面说过，LSM树就是一堆小树，在内存中的小树即memstore，每次flush，内存中的memstore变成磁盘上一个新的storefile。</p> \n<p>3）为什么会有compact？很简单，随着小树越来越多，读的性能会越来越差，因此需要在适当的时候，对磁盘中的小树进行merge，多棵小树变成一颗大树。</p> \n<p><br> </p>\n                </div><div data-report-view=\"{&quot;mod&quot;:&quot;1585297308_001&quot;,&quot;dest&quot;:&quot;https://blog.csdn.net/u010415792/article/details/8897599&quot;,&quot;extend1&quot;:&quot;pc&quot;,&quot;ab&quot;:&quot;new&quot;}\"><div></div></div>\n        </div>"
  },
  {
    "category": "dataStruct",
    "qes": "BFS及DFS的Java实现",
    "ans": "<div id=\"article_content\" class=\"article_content clearfix\">\n        <link rel=\"stylesheet\" href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-b5506197d8.css\">\n                <div id=\"content_views\" class=\"htmledit_views\">\n                    <h2><a name=\"t0\"></a><a name=\"t0\"></a>前言</h2> \n<p>&nbsp; &nbsp; <a href=\"https://baike.baidu.com/item/%E5%AE%BD%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/5224802\">BFS（广度优先遍历，Breadth First Search）</a>及<a href=\"https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/5224976\">DFS（深度优先遍历，Depth First Search）</a>是遍历树或图的两种最常用的方法。本文简单的讲解在面对树或者图的问题时，使用BFS及DFS解答题目时的思路及实现。</p> \n<p>&nbsp;</p> \n<h2><a name=\"t1\"></a><a name=\"t1\"></a>BFS</h2> \n<p>&nbsp;</p> \n<p><img alt=\"\" class=\"has\" height=\"789\" src=\"https://img-blog.csdnimg.cn/20181219152849568.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dlbmUxOTk0,size_16,color_FFFFFF,t_70\" width=\"882\"></p> \n<p>&nbsp;&nbsp;&nbsp; 根据上图就可以很清晰的理解出BFS的概念，即一层一层的遍历。在使用BFS解决问题的时候最先想到的方式应该是<span style=\"color:#f33b45;\"><strong>队列（Queue，FIFO）</strong></span></p> \n<p>&nbsp; &nbsp; 其主要思想是从起始点开始，将其邻近的所有顶点都加到一个队列（FIFO）中去，然后标记下这些顶点离起始顶点的距离为1.最后将起始顶点标记为已访问，今后就不会再访问。然后再从队列中取出最先进队的顶点A，也取出其周边邻近节点，加入队列末尾，最后离开这个顶点A。依次下去，直到队列为空为止。从上面描述的过程我们知道每个顶点被访问的次数最多一次（已访问的节点不会再访问）。</p> \n<p>&nbsp;</p> \n<p>代码：</p> \n<p>首先定义二叉树：</p> \n<pre class=\"has\" name=\"code\"><code class=\"language-java hljs\"><ol class=\"hljs-ln\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">//Definition for a binary tree node.</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">TreeNode</span> </span>{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">  <span class=\"hljs-keyword\">int</span> val;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">  TreeNode left;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">  TreeNode right;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">  TreeNode(<span class=\"hljs-keyword\">int</span> x) { val = x; }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li></ol></code><div class=\"hljs-button {2}\" data-title=\"复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\" onclick=\"hljs.copyCode(event)\"></div></pre> \n<p>使用队列实现BFS遍历二叉树：</p> \n<pre class=\"has\" name=\"code\"><code class=\"language-java hljs\"><ol class=\"hljs-ln\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">//使用Queue实现BFS</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">BFSWithQueue</span><span class=\"hljs-params\">(TreeNode root)</span> </span>{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    Queue&lt;TreeNode&gt; queue = <span class=\"hljs-keyword\">new</span> LinkedList&lt;&gt;();</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span> (root != <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        queue.add(root);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">while</span> (!queue.isEmpty()) {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        TreeNode treeNode = queue.poll();</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-comment\">//在这里处理遍历到的TreeNode节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span> (treeNode.left != <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            queue.add(treeNode.left);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span> (treeNode.right != <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            queue.add(treeNode.right);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li></ol></code><div class=\"hljs-button {2}\" data-title=\"复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\" onclick=\"hljs.copyCode(event)\"></div></pre> \n<h2><a name=\"t2\"></a><a name=\"t2\"></a>DFS</h2> \n<p><img alt=\"\" class=\"has\" height=\"608\" src=\"https://img-blog.csdnimg.cn/20181219152754628.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dlbmUxOTk0,size_16,color_FFFFFF,t_70\" width=\"891\"></p> \n<p>上图可以看出DFS是如何工作的，使用DFS解决问题时最先想到的应该是<span style=\"color:#f33b45;\"><strong>递归和栈（Stack）</strong></span></p> \n<p>DFS是从起始顶点开始，递归访问其所有邻近节点，比如A节点是其第一个邻近节点，而B节点又是A的一个邻近节点，则DFS访问A节点后再访问B节点，如果B节点有未访问的邻近节点的话将继续访问其邻近节点，否则继续访问A的未访问邻近节点，当所有从A节点出去的路径都访问完之后，继续递归访问除A以外未被访问的邻近节点。</p> \n<p>&nbsp;</p> \n<p>使用递归实现DFS遍历二叉树：（优先选择）</p> \n<pre class=\"has\" name=\"code\"><code class=\"language-java hljs\"><ol class=\"hljs-ln\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">//DFS递归实现</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">DFSWithRecursion</span><span class=\"hljs-params\">(TreeNode root)</span> </span>{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span> (root == <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">return</span>;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-comment\">//在这里处理遍历到的TreeNode节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span> (root.left != <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        DFSWithRecursion(root.left);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span> (root.right != <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        DFSWithRecursion(root.right);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li></ol></code><div class=\"hljs-button {2}\" data-title=\"复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\" onclick=\"hljs.copyCode(event)\"></div></pre> \n<p>使用Stack实现DFS</p> \n<pre class=\"has\" name=\"code\"><code class=\"language-java hljs\"><ol class=\"hljs-ln\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">//DFS的迭代实现版本（Stack）</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">DFSWithStack</span><span class=\"hljs-params\">(TreeNode root)</span> </span>{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">     <span class=\"hljs-keyword\">if</span> (root == <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">         <span class=\"hljs-keyword\">return</span>;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">     Stack&lt;TreeNode&gt; stack = <span class=\"hljs-keyword\">new</span> Stack&lt;&gt;();</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">     stack.push(root);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">     <span class=\"hljs-keyword\">while</span> (!stack.isEmpty()) {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">         TreeNode treeNode = stack.pop();</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">         <span class=\"hljs-comment\">//在这里处理遍历到的TreeNode</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">             </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">         <span class=\"hljs-keyword\">if</span> (treeNode.right != <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">             stack.push(treeNode.right);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">         <span class=\"hljs-keyword\">if</span> (treeNode.left != <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">             stack.push(treeNode.left);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">     }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li></ol></code><div class=\"hljs-button {2}\" data-title=\"复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\" onclick=\"hljs.copyCode(event)\"></div></pre> \n<p>以上三种方法都将数中每个节点遍历一遍，时间复杂度为O(N)。</p> \n<p>&nbsp;</p> \n<h2><a name=\"t3\"></a><a name=\"t3\"></a>N叉树</h2> \n<p>树结构：</p> \n<pre class=\"has\" name=\"code\"><code class=\"language-java hljs\"><ol class=\"hljs-ln\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">// Definition for a Node.</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Node</span> </span>{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> val;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">public</span> List&lt;Node&gt; children;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">Node</span><span class=\"hljs-params\">()</span> </span>{}</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">Node</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> _val,List&lt;Node&gt; _children)</span> </span>{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        val = _val;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        children = _children;</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">};</div></div></li></ol></code><div class=\"hljs-button {2}\" data-title=\"复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\" onclick=\"hljs.copyCode(event)\"></div></pre> \n<p>BFS及DFS只需将上述代码用for循环替代</p> \n<p>&nbsp;</p> \n<h2><a name=\"t4\"></a><a name=\"t4\"></a>图（graph）</h2> \n<p>图和树的最大区别在于图的下一个节点可能指向已访问过的节点。因此在使用BFS及DFS遍历时，<span style=\"color:#f33b45;\"><strong>应维护一个Set，Set中存放已被访问过的节点，在遍历时先判断节点未被访问过再遍历即可。</strong></span></p> \n<p>&nbsp;</p> \n<p>使用BFS举例如下：</p> \n<pre class=\"has\" name=\"code\"><code class=\"language-java hljs\"><ol class=\"hljs-ln\"><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"1\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-comment\">//使用Queue实现BFS</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"2\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">BFSWithQueue</span><span class=\"hljs-params\">(Node root)</span> </span>{</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"3\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    Queue&lt;Node&gt; queue = <span class=\"hljs-keyword\">new</span> LinkedList&lt;&gt;();</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"4\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">if</span> (root != <span class=\"hljs-keyword\">null</span>)</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"5\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        queue.add(root);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"6\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    Set&lt;Node&gt; visited = <span class=\"hljs-keyword\">new</span> HashSet&lt;&gt;();</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"7\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"8\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    <span class=\"hljs-keyword\">while</span> (!queue.isEmpty()) {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"9\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        Node node = queue.poll();</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"10\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        visited.add(node);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"11\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"12\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-comment\">//在这里处理遍历到的Node节点</span></div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"13\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\"> </div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"14\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        <span class=\"hljs-keyword\">if</span> (node.children != <span class=\"hljs-keyword\">null</span>) {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"15\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            <span class=\"hljs-keyword\">for</span> (Node child : node.children) {</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"16\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                <span class=\"hljs-keyword\">if</span> (child != <span class=\"hljs-keyword\">null</span> &amp;&amp; !visited.contains(child){</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"17\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                    queue.add(child);</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"18\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">                }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"19\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">            }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"20\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">        }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"21\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">    }</div></div></li><li><div class=\"hljs-ln-numbers\"><div class=\"hljs-ln-line hljs-ln-n\" data-line-number=\"22\"></div></div><div class=\"hljs-ln-code\"><div class=\"hljs-ln-line\">}</div></div></li></ol></code><div class=\"hljs-button {2}\" data-title=\"复制\" data-report-click=\"{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}\" onclick=\"hljs.copyCode(event)\"></div></pre> \n<p>&nbsp;</p> \n<p>follow my github:<a href=\"https://github.com/Gene1994\">https://github.com/Gene1994</a></p>\n                </div><div><div></div></div><div><div></div></div>\n        </div>"
  }
]